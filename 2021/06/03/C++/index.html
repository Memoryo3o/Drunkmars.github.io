<!DOCTYPE html>
<html lang="zh-CN">
    <!-- title -->


    

<!-- keywords -->



<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="author" content="Drunkmars">
    <meta name="renderer" content="webkit">
    <meta name="copyright" content="Drunkmars">
    
        <meta name="keywords" content="Drunkmars,Drunkmars-theme,Drunkmars-blog">
    
    <meta name="description" content="">
    <meta name="description" content="因为5月份耽误了一段时间导致pe课程拖了很久，接下来进入到C++的学习。">
<meta property="og:type" content="article">
<meta property="og:title" content="C++">
<meta property="og:url" content="http://example.com/2021/06/03/C++/index.html">
<meta property="og:site_name" content="Drunkmars">
<meta property="og:description" content="因为5月份耽误了一段时间导致pe课程拖了很久，接下来进入到C++的学习。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/images/C/image-20210603111532314.png">
<meta property="og:image" content="http://example.com/images/C/image-20210603111723853.png">
<meta property="og:image" content="http://example.com/images/C/image-20210603112127532.png">
<meta property="og:image" content="http://example.com/images/C/image-20210603112855222.png">
<meta property="og:image" content="http://example.com/images/C/image-20210603112714503.png">
<meta property="og:image" content="http://example.com/images/C/image-20210603113052619.png">
<meta property="og:image" content="http://example.com/images/C/image-20210603114401910.png">
<meta property="og:image" content="http://example.com/images/C/image-20210603114723230.png">
<meta property="og:image" content="http://example.com/images/C/image-20210603224806177.png">
<meta property="og:image" content="http://example.com/images/C/image-20210604142448283.png">
<meta property="og:image" content="http://example.com/images/C/clipboard.png">
<meta property="og:image" content="http://example.com/images/C/1.png">
<meta property="og:image" content="http://example.com/images/C/2.png">
<meta property="og:image" content="http://example.com/images/C/3.png">
<meta property="og:image" content="http://example.com/images/C/4.png">
<meta property="og:image" content="http://example.com/images/C/5.png">
<meta property="og:image" content="http://example.com/images/C/image-20210604143651308.png">
<meta property="og:image" content="http://example.com/images/C/image-20210604144637838.png">
<meta property="og:image" content="http://example.com/images/C/image-20210604162201326.png">
<meta property="og:image" content="http://example.com/images/C/image-20210604162704766.png">
<meta property="og:image" content="http://example.com/images/C/image-20210604162949947.png">
<meta property="og:image" content="http://example.com/images/C/image-20210604170120376.png">
<meta property="og:image" content="http://example.com/images/C/image-20210604170305208.png">
<meta property="og:image" content="http://example.com/images/C/image-20210604171534833.png">
<meta property="og:image" content="http://example.com/images/C/image-20210604172831323.png">
<meta property="og:image" content="http://example.com/images/C/image-20210604173101279.png">
<meta property="og:image" content="http://example.com/images/C/image-20210606203402747.png">
<meta property="og:image" content="http://example.com/images/C/image-20210606203651714.png">
<meta property="og:image" content="http://example.com/images/C/image-20210606203951011.png">
<meta property="og:image" content="http://example.com/images/C/image-20210606204927186.png">
<meta property="og:image" content="http://example.com/images/C/image-20210606205614180.png">
<meta property="og:image" content="http://example.com/images/C/image-20210606205848961.png">
<meta property="og:image" content="http://example.com/images/C/image-20210606210635300.png">
<meta property="og:image" content="http://example.com/images/C/image-20210606210430488.png">
<meta property="og:image" content="http://example.com/images/C/image-20210606211200381.png">
<meta property="og:image" content="http://example.com/images/C/image-20210606211520368.png">
<meta property="og:image" content="http://example.com/images/C/image-20210606211735460.png">
<meta property="og:image" content="http://example.com/images/C/image-20210606211837400.png">
<meta property="og:image" content="http://example.com/images/C/image-20210606212249439.png">
<meta property="og:image" content="http://example.com/images/C/image-20210606212755157.png">
<meta property="og:image" content="http://example.com/images/C/image-20210606212744228.png">
<meta property="og:image" content="http://example.com/images/C/image-20210606213111427.png">
<meta property="og:image" content="http://example.com/images/C/image-20210606213038727.png">
<meta property="og:image" content="http://example.com/images/C/image-20210606214222157.png">
<meta property="og:image" content="http://example.com/images/C/image-20210606214632336.png">
<meta property="og:image" content="http://example.com/images/C/image-20210606214939474.png">
<meta property="og:image" content="http://example.com/images/C/image-20210606215725725.png">
<meta property="og:image" content="http://example.com/images/C/image-20210606215928685.png">
<meta property="og:image" content="http://example.com/images/C/image-20210606220513996.png">
<meta property="og:image" content="http://example.com/images/C/image-20210607112229073.png">
<meta property="og:image" content="http://example.com/images/C/image-20210607163202504.png">
<meta property="og:image" content="http://example.com/images/C/image-20210607163257529.png">
<meta property="og:image" content="http://example.com/images/C/image-20210607164837536.png">
<meta property="og:image" content="http://example.com/images/C/image-20210607164810347.png">
<meta property="og:image" content="http://example.com/images/C/image-20210607165746482.png">
<meta property="og:image" content="http://example.com/images/C/image-20210607172136245.png">
<meta property="og:image" content="http://example.com/images/C/image-20210607172209984.png">
<meta property="og:image" content="http://example.com/images/C/image-20210607184301704.png">
<meta property="og:image" content="http://example.com/images/C/image-20210607185657747.png">
<meta property="og:image" content="http://example.com/images/C/image-20210607185531793.png">
<meta property="og:image" content="http://example.com/images/C/image-20210607190218744.png">
<meta property="og:image" content="http://example.com/images/C/image-20210607190333614.png">
<meta property="og:image" content="http://example.com/images/C/image-20210607190636541.png">
<meta property="og:image" content="http://example.com/images/C/image-20210607192102481.png">
<meta property="og:image" content="http://example.com/images/C/image-20210607193523050.png">
<meta property="og:image" content="http://example.com/images/C/image-20210607193720830.png">
<meta property="og:image" content="http://example.com/images/C/image-20210607193826221.png">
<meta property="og:image" content="http://example.com/images/C/image-20210607193912380.png">
<meta property="og:image" content="http://example.com/images/C/image-20210607193935408.png">
<meta property="og:image" content="http://example.com/images/C/image-20210607193956869.png">
<meta property="og:image" content="http://example.com/images/C/image-20210607194517709.png">
<meta property="og:image" content="http://example.com/images/C/image-20210607194919809.png">
<meta property="og:image" content="http://example.com/images/C/image-20210608222837038.png">
<meta property="og:image" content="http://example.com/images/C/image-20210608222959586.png">
<meta property="og:image" content="http://example.com/images/C/image-20210608223119163.png">
<meta property="og:image" content="http://example.com/images/C/image-20210608223201780.png">
<meta property="og:image" content="http://example.com/images/C/image-20210608223817747.png">
<meta property="og:image" content="http://example.com/images/C/image-20210608224147017.png">
<meta property="og:image" content="http://example.com/images/C/image-20210608224308866.png">
<meta property="og:image" content="http://example.com/images/C/image-20210608224420817.png">
<meta property="og:image" content="http://example.com/images/C/image-20210608224632596.png">
<meta property="og:image" content="http://example.com/images/C/image-20210608225210635.png">
<meta property="og:image" content="http://example.com/images/C/image-20210608225806286.png">
<meta property="og:image" content="http://example.com/images/C/image-20210608230545746.png">
<meta property="og:image" content="http://example.com/images/C/image-20210608231613560.png">
<meta property="og:image" content="http://example.com/images/C/image-20210608231941365.png">
<meta property="og:image" content="http://example.com/images/C/image-20210608232545135.png">
<meta property="og:image" content="http://example.com/images/C/image-20210608234136872.png">
<meta property="og:image" content="http://example.com/images/C/image-20210608234229032.png">
<meta property="og:image" content="http://example.com/images/C/image-20210608235042527.png">
<meta property="og:image" content="http://example.com/images/C/image-20210608235230884.png">
<meta property="og:image" content="http://example.com/images/C/image-20210609111825635.png">
<meta property="og:image" content="http://example.com/images/C/image-20210609111742780.png">
<meta property="og:image" content="http://example.com/images/C/image-20210609112041133.png">
<meta property="og:image" content="http://example.com/images/C/image-20210609112147302.png">
<meta property="og:image" content="http://example.com/images/C/image-20210609113951029.png">
<meta property="og:image" content="http://example.com/images/C/image-20210609174045934.png">
<meta property="og:image" content="http://example.com/images/C/image-20210609161428609.png">
<meta property="og:image" content="http://example.com/images/C/image-20210609174113045.png">
<meta property="og:image" content="http://example.com/images/C/image-20210609161731230.png">
<meta property="og:image" content="http://example.com/images/C/image-20210609163511707.png">
<meta property="og:image" content="http://example.com/images/C/image-20210609163611639.png">
<meta property="og:image" content="http://example.com/images/C/image-20210609163642893.png">
<meta property="og:image" content="http://example.com/images/C/image-20210609163748465.png">
<meta property="og:image" content="http://example.com/images/C/image-20210609163841925.png">
<meta property="og:image" content="http://example.com/images/C/image-20210609164621314.png">
<meta property="og:image" content="http://example.com/images/C/image-20210609164721636.png">
<meta property="og:image" content="http://example.com/images/C/image-20210609170613885.png">
<meta property="og:image" content="http://example.com/images/C/image-20210609170742874.png">
<meta property="og:image" content="http://example.com/images/C/image-20210609171940583.png">
<meta property="og:image" content="http://example.com/images/C/image-20210609172144923.png">
<meta property="og:image" content="http://example.com/images/C/image-20210609172519250.png">
<meta property="og:image" content="http://example.com/images/C/image-20210609172634100.png">
<meta property="og:image" content="http://example.com/images/C/image-20210609173004516.png">
<meta property="og:image" content="http://example.com/images/C/image-20210609173011572.png">
<meta property="og:image" content="http://example.com/images/C/image-20210609190137320.png">
<meta property="og:image" content="http://example.com/images/C/image-20210609190518265.png">
<meta property="og:image" content="http://example.com/images/C/image-20210609190440775.png">
<meta property="og:image" content="http://example.com/images/C/image-20210609190758887.png">
<meta property="og:image" content="http://example.com/images/C/image-20210609191523303.png">
<meta property="og:image" content="http://example.com/images/C/image-20210609191634571.png">
<meta property="og:image" content="http://example.com/images/C/image-20210609191436409.png">
<meta property="og:image" content="http://example.com/images/C/image-20210609191742684.png">
<meta property="og:image" content="http://example.com/images/C/image-20210609191712899.png">
<meta property="og:image" content="http://example.com/images/C/image-20210609194004214.png">
<meta property="og:image" content="http://example.com/images/C/image-20210609194122417.png">
<meta property="og:image" content="http://example.com/images/C/image-20210610111335687.png">
<meta property="og:image" content="http://example.com/images/C/image-20210611162720678.png">
<meta property="og:image" content="http://example.com/images/C/image-20210611163242411.png">
<meta property="og:image" content="http://example.com/images/C/image-20210611163427718.png">
<meta property="og:image" content="http://example.com/images/C/image-20210611171752250.png">
<meta property="og:image" content="http://example.com/images/C/image-20210611172143169.png">
<meta property="og:image" content="http://example.com/images/C/image-20210611172309211.png">
<meta property="og:image" content="http://example.com/images/C/image-20210611172532488.png">
<meta property="og:image" content="http://example.com/images/C/image-20210611213705929.png">
<meta property="og:image" content="http://example.com/images/C/image-20210611221844925.png">
<meta property="og:image" content="http://example.com/images/C/image-20210611223519161.png">
<meta property="og:image" content="http://example.com/images/C/image-20210611195552995.png">
<meta property="og:image" content="http://example.com/images/C/image-20210611195916888.png">
<meta property="og:image" content="http://example.com/images/C/image-20210611202308339.png">
<meta property="og:image" content="http://example.com/images/C/image-20210611202235226.png">
<meta property="og:image" content="http://example.com/images/C/image-20210611203228056.png">
<meta property="og:image" content="http://example.com/images/C/image-20210611205522482.png">
<meta property="og:image" content="http://example.com/images/C/image-20210613140748340.png">
<meta property="og:image" content="http://example.com/images/C/image-20210613140854522.png">
<meta property="og:image" content="http://example.com/images/C/image-20210613140937210.png">
<meta property="og:image" content="http://example.com/images/C/image-20210613141110234.png">
<meta property="og:image" content="http://example.com/images/C/image-20210613142228732.png">
<meta property="og:image" content="http://example.com/images/C/image-20210613142704718.png">
<meta property="og:image" content="http://example.com/images/C/image-20210613143248318.png">
<meta property="og:image" content="http://example.com/images/C/image-20210613144817518.png">
<meta property="og:image" content="http://example.com/images/C/image-20210613150157305.png">
<meta property="og:image" content="http://example.com/images/C/image-20210613150607876.png">
<meta property="og:image" content="http://example.com/images/C/image-20210613150842595.png">
<meta property="og:image" content="http://example.com/images/C/image-20210613153816477.png">
<meta property="og:image" content="http://example.com/images/C/image-20210613153832449.png">
<meta property="article:published_time" content="2021-06-02T16:00:00.000Z">
<meta property="article:modified_time" content="2021-06-14T16:03:25.280Z">
<meta property="article:author" content="Drunkmars">
<meta property="article:tag" content="二进制">
<meta property="article:tag" content="C++">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/images/C/image-20210603111532314.png">
    <meta http-equiv="Cache-control" content="no-cache">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="icon" href="/assets/Drunkmars.ico">
    
    <title>C++ · Drunkmars&#39;s Blog</title>
    <!-- /*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
/* This file is meant as a standalone workflow for
- testing support for link[rel=preload]
- enabling async CSS loading in browsers that do not support rel=preload
- applying rel preload css once loaded, whether supported or not.
*/ -->
<script>
    (function (w) {
        'use strict'
        // rel=preload support test
        if (!w.loadCSS) {
            w.loadCSS = function () {}
        }
        // define on the loadCSS obj
        var rp = (loadCSS.relpreload = {})
        // rel=preload feature support test
        // runs once and returns a function for compat purposes
        rp.support = (function () {
            var ret
            try {
                ret = w.document.createElement('link').relList.supports('preload')
            } catch (e) {
                ret = false
            }
            return function () {
                return ret
            }
        })()

        // if preload isn't supported, get an asynchronous load by using a non-matching media attribute
        // then change that media back to its intended value on load
        rp.bindMediaToggle = function (link) {
            // remember existing media attr for ultimate state, or default to 'all'
            var finalMedia = link.media || 'all'

            function enableStylesheet() {
                link.media = finalMedia
            }

            // bind load handlers to enable media
            if (link.addEventListener) {
                link.addEventListener('load', enableStylesheet)
            } else if (link.attachEvent) {
                link.attachEvent('onload', enableStylesheet)
            }

            // Set rel and non-applicable media type to start an async request
            // note: timeout allows this to happen async to let rendering continue in IE
            setTimeout(function () {
                link.rel = 'stylesheet'
                link.media = 'only x'
            })
            // also enable media after 3 seconds,
            // which will catch very old browsers (android 2.x, old firefox) that don't support onload on link
            setTimeout(enableStylesheet, 3000)
        }

        // loop through link elements in DOM
        rp.poly = function () {
            // double check this to prevent external calls from running
            if (rp.support()) {
                return
            }
            var links = w.document.getElementsByTagName('link')
            for (var i = 0; i < links.length; i++) {
                var link = links[i]
                // qualify links to those with rel=preload and as=style attrs
                if (
                    link.rel === 'preload' &&
                    link.getAttribute('as') === 'style' &&
                    !link.getAttribute('data-loadcss')
                ) {
                    // prevent rerunning on link
                    link.setAttribute('data-loadcss', true)
                    // bind listeners to toggle media back
                    rp.bindMediaToggle(link)
                }
            }
        }

        // if unsupported, run the polyfill
        if (!rp.support()) {
            // run once at least
            rp.poly()

            // rerun poly on an interval until onload
            var run = w.setInterval(rp.poly, 500)
            if (w.addEventListener) {
                w.addEventListener('load', function () {
                    rp.poly()
                    w.clearInterval(run)
                })
            } else if (w.attachEvent) {
                w.attachEvent('onload', function () {
                    rp.poly()
                    w.clearInterval(run)
                })
            }
        }

        // commonjs
        if (typeof exports !== 'undefined') {
            exports.loadCSS = loadCSS
        } else {
            w.loadCSS = loadCSS
        }
    })(typeof global !== 'undefined' ? global : this)
</script>

    <style type="text/css">
    @font-face {
        font-family: 'Oswald-Regular';
        src: url("/font/Oswald-Regular.ttf");
    }

    body {
        margin: 0;
    }

    header,
    footer,
    .back-top,
    .sidebar,
    .container,
    .site-intro-meta,
    .toc-wrapper {
        display: none;
    }

    .site-intro {
        position: relative;
        z-index: 3;
        width: 100%;
        /* height: 50vh; */
        overflow: hidden;
    }

    .site-intro-placeholder {
        position: absolute;
        z-index: -2;
        top: 0;
        left: 0;
        width: calc(100% + 300px);
        height: 100%;
        background: repeating-linear-gradient(-45deg, #444 0, #444 80px, #333 80px, #333 160px);
        background-position: center center;
        transform: translate3d(-226px, 0, 0);
        animation: gradient-move 2.5s ease-out 0s infinite;
    }

    @keyframes gradient-move {
        0% {
            transform: translate3d(-226px, 0, 0);
        }
        100% {
            transform: translate3d(0, 0, 0);
        }
    }
</style>

    <link rel="preload" href="/css/style.css?v=20210823" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="/css/dark.css?v=20210823" as="style">
    <link rel="stylesheet" href="/css/dark.css" media="(prefers-color-scheme: dark)">
    <link rel="stylesheet" href="/css/mobile.css?v=20210823" media="(max-width: 960px)">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" as="script">
    <link rel="preload" href="/scripts/main.js?v=20210823" as="script">
    <link rel="preload" href="/scripts/dark.js?v=20210823" as="script">
    <link rel="preload" href="/font/Oswald-Regular.ttf" as="font" crossorigin>
    <link rel="preload" href="https://at.alicdn.com/t/font_327081_1dta1rlogw17zaor.woff" as="font" crossorigin>
    <!-- algolia -->
    
    <!-- 百度统计  -->
    
    <!-- 谷歌统计  -->
    
<meta name="generator" content="Hexo 5.4.0"></head>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <script type="text/javascript">
        if (typeof window.$ == undefined) {
            console.warn('jquery load from jsdelivr failed, will load local script')
            document.write('<script src="/lib/jquery.min.js" />')
        }
    </script>
    
        <body class="post-body">
    
        <!-- header -->
        <header class="header header-mobile">
    <!-- top read progress line -->
    <div class="header-element">
        <div class="read-progress"></div>
    </div>
    <!-- sidebar menu button -->
    <div class="header-element">
        
            <div class="header-sidebar-menu">
        
            
                <div style="padding-left: 1px;">&#xe775;</div>
            
        </div>
    </div>
    <!-- header actions -->
    <div class="header-actions">
        <!-- theme mode switch button -->
        <span class="header-theme-btn header-element">
            <i class="fas fa-adjust"></i>
        </span>
        <!-- back to home page text -->
        <span class="home-link header-element">
            <a href=/>Drunkmars's Blog</a>
        </span>
    </div>
    <!-- toggle banner for post layout -->
    
        
            <div class="banner">
        
            <div class="blog-title header-element">
                <a href="/">Drunkmars&#39;s Blog</a>
            </div>
            <div class="post-title header-element">
                <a href="#" class="post-name">C++</a>
            </div>
        </div>
    
</header>

        <!-- fixed footer -->
        <footer class="footer-fixed">
    <!-- back to top button -->
    <div class="footer-fixed-element">
        
            <div class="back-top back-top-hidden">
        
        
            <div>&#xe639;</div>
        
        </div>
    </div>
</footer>

        <!-- wrapper -->
        <div class="wrapper">
            <div class="site-intro" style="







    height:50vh;

">
    
    <!-- 主页  -->
    
        
    <!-- 404页  -->
            
    <div class="site-intro-placeholder"></div>
    <div class="site-intro-img" style="background-image: url(/intro/post-bg.jpg)"></div>
    <div class="site-intro-meta">
        <!-- 标题  -->
        <h1 class="intro-title">
            <!-- 主页  -->
            
                C++
            <!-- 404 -->
            
        </h1>
        <!-- 副标题 -->
        <p class="intro-subtitle">
            <!-- 主页副标题  -->
            
                
            <!-- 404 -->
            
        </p>
        <!-- 文章页 meta -->
        
            <div class="post-intros">
                <!-- 文章页标签  -->
                
                    <div class= post-intro-tags >
    
    
        <a class="post-tag" href="javascript:void(0);" data-tags="二进制">二进制</a>
    
        <a class="post-tag" href="javascript:void(0);" data-tags="C++">C++</a>
    
</div>

                
                
                    <div class="post-intro-read">
                        <span>字数统计: <span class="post-count word-count">15.7k</span>阅读时长: <span class="post-count reading-time">68 min</span></span>
                    </div>
                
                <div class="post-intro-meta">
                    <!-- 撰写日期 -->
                    <span class="iconfont-archer post-intro-calander">&#xe676;</span>
                    <span class="post-intro-time">2021/06/03</span>
                    <!-- busuanzi -->
                    
                        <span id="busuanzi_container_page_pv" class="busuanzi-pv">
                            <span class="iconfont-archer post-intro-busuanzi">&#xe602;</span>
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    
                    <!-- 文章分享 -->
                    <span class="share-wrapper">
                        <span class="iconfont-archer share-icon">&#xe71d;</span>
                        <span class="share-text">Share</span>
                        <ul class="share-list">
                            <li class="iconfont-archer share-qr" data-type="qr">&#xe75b;
                                <div class="share-qrcode"></div>
                            </li>
                            <li class="iconfont-archer" data-type="weibo">&#xe619;</li>
                            <li class="iconfont-archer" data-type="qzone">&#xe62e;</li>
                            <li class="iconfont-archer" data-type="twitter">&#xe634;</li>
                            <li class="iconfont-archer" data-type="facebook">&#xe67a;</li>
                        </ul>
                    </span>
                </div>
            </div>
        
    </div>
</div>

            <script>
  // get user agent
  function getBrowserVersions() {
    var u = window.navigator.userAgent
    return {
      userAgent: u,
      trident: u.indexOf('Trident') > -1, //IE内核
      presto: u.indexOf('Presto') > -1, //opera内核
      webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
      gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
      mobile: !!u.match(/AppleWebKit.*Mobile.*/), //是否为移动终端
      ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
      android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
      iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者安卓QQ浏览器
      iPad: u.indexOf('iPad') > -1, //是否为iPad
      webApp: u.indexOf('Safari') == -1, //是否为web应用程序，没有头部与底部
      weixin: u.indexOf('MicroMessenger') == -1, //是否为微信浏览器
      uc: u.indexOf('UCBrowser') > -1, //是否为android下的UC浏览器
    }
  }
  var browser = {
    versions: getBrowserVersions(),
  }
  console.log('userAgent: ' + browser.versions.userAgent)

  // callback
  function fontLoaded() {
    console.log('font loaded')
    if (document.getElementsByClassName('site-intro-meta')) {
      document
        .getElementsByClassName('intro-title')[0]
        .classList.add('intro-fade-in')
      document
        .getElementsByClassName('intro-subtitle')[0]
        .classList.add('intro-fade-in')
      var postIntros = document.getElementsByClassName('post-intros')[0]
      if (postIntros) {
        postIntros.classList.add('post-fade-in')
      }
    }
  }

  // UC不支持跨域，所以直接显示
  function asyncCb() {
    if (browser.versions.uc) {
      console.log('UCBrowser')
      fontLoaded()
    } else {
      WebFont.load({
        custom: {
          families: ['Oswald-Regular'],
        },
        loading: function () {
          // 所有字体开始加载
          // console.log('font loading');
        },
        active: function () {
          // 所有字体已渲染
          fontLoaded()
        },
        inactive: function () {
          // 字体预加载失败，无效字体或浏览器不支持加载
          console.log('inactive: timeout')
          fontLoaded()
        },
        timeout: 5000, // Set the timeout to two seconds
      })
    }
  }

  function asyncErr() {
    console.warn('script load from CDN failed, will load local script')
  }

  // load webfont-loader async, and add callback function
  function async(u, cb, err) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0]
    o.src = u
    if (cb) {
      o.addEventListener(
        'load',
        function (e) {
          cb(null, e)
        },
        false
      )
    }
    if (err) {
      o.addEventListener(
        'error',
        function (e) {
          err(null, e)
        },
        false
      )
    }
    s.parentNode.insertBefore(o, s)
  }

  var asyncLoadWithFallBack = function (arr, success, reject) {
    var currReject = function () {
      reject()
      arr.shift()
      if (arr.length) async(arr[0], success, currReject)
    }

    async(arr[0], success, currReject)
  }

  asyncLoadWithFallBack(
    [
      'https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.min.js',
      'https://cdn.bootcss.com/webfont/1.6.28/webfontloader.js',
      "/lib/webfontloader.min.js",
    ],
    asyncCb,
    asyncErr
  )
</script>

            <img class="loading" src="/assets/loading.svg" style="display: block; margin: 6rem auto 0 auto; width: 6rem; height: 6rem;" />
            <div class="container container-unloaded">
                <main class="main post-page">
    <article class="article-entry">
        <p>因为5月份耽误了一段时间导致pe课程拖了很久，接下来进入到C++的学习。</p>
<span id="more"></span>



<h1 id="this类指针"><a href="#this类指针" class="headerlink" title="this类指针"></a>this类指针</h1><p>封装：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>将函数体定义到结构体内部就是封装</span><br><span class="line">    </span><br><span class="line"><span class="number">2.</span>编译器会自动传递结构体的指针给函数</span><br></pre></td></tr></table></figure>



<p>类：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">带有函数的结构体称为类</span><br></pre></td></tr></table></figure>



<p>成员函数：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">结构体里面的函数称为成员函数</span><br></pre></td></tr></table></figure>



<p>定义一个名叫<code>Base</code>的结构体和<code>Max</code>的比较函数（用<code>Pb</code>这个指针进行比较）</p>
<p><img src="/images/C/image-20210603111532314.png" alt="image-20210603111532314"></p>
<p>运行一下没有问题，输出了两个数中的最大值</p>
<p><img src="/images/C/image-20210603111723853.png" alt="image-20210603111723853"></p>
<p>输出一下当前结构体的大小为8</p>
<p><img src="/images/C/image-20210603112127532.png" alt="image-20210603112127532"></p>
<p>平栈方式为外平栈</p>
<p><img src="/images/C/image-20210603112855222.png" alt="image-20210603112855222"></p>
<p>这里把<code>Max</code>函数放到结构体里面发现结构体大小还是为8</p>
<p><img src="/images/C/image-20210603112714503.png" alt="image-20210603112714503"></p>
<p>把<code>Max</code>函数放到结构体里，发现为内平栈，注意这里要用<code>base.Max(&amp;base);</code>进行调用，要声明<code>Max</code>函数在结构体里面</p>
<p><img src="/images/C/image-20210603113052619.png" alt="image-20210603113052619"></p>
<p>这里再尝试不传指针进去</p>
<p><img src="/images/C/image-20210603114401910.png" alt="image-20210603114401910"></p>
<p>编译器会自动传递一个参数进去保存变量的首地址，也就是说函数在结构体里的话编译器会自动生成一个指针</p>
<p><img src="/images/C/image-20210603114723230.png" alt="image-20210603114723230"></p>
<p>放到结构体外可以直接调用，放到结构体里需要调用结构体再调用函数</p>
<p>为了避免参数和变量同名需要使用到this指针</p>
<p>当函数位于结构体内时，若没有传入参数，编译器会自动传入一个指针，称为<code>this指针</code></p>
<h2 id="this指针的作用"><a href="#this指针的作用" class="headerlink" title="this指针的作用"></a>this指针的作用</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>可以更好的区分哪个是参数，哪个是成员。</span><br><span class="line">    </span><br><span class="line"><span class="number">2.</span>可以通过<span class="keyword">this</span>指针返回首地址</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">GetAddr</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">    	<span class="keyword">return</span> *(<span class="keyword">int</span>*)<span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="number">3.</span><span class="keyword">this</span>指针不能够更改，因为<span class="keyword">this</span>指针的作用就是指向当前对象的首地址</span><br></pre></td></tr></table></figure>





<p><img src="/images/C/image-20210603224806177.png" alt="image-20210603224806177"></p>
<p>结构体内进行加减乘除操作</p>
<p><img src="/images/C/image-20210604142448283.png" alt="image-20210604142448283"></p>
<h2 id="全局函数和结构体函数的区别"><a href="#全局函数和结构体函数的区别" class="headerlink" title="全局函数和结构体函数的区别"></a>全局函数和结构体函数的区别</h2><p>1.结构体指针传入<code>this指针</code></p>
<p><img src="/images/C/clipboard.png"></p>
<p>全局函数传入所需参数变量</p>
<p><img src="/images/C/1.png"></p>
<p>2.结构体 把 <code>this 指针</code> 给 <code>ecx</code> 然后 又放到 <code>[ebp-8]</code> 里 ，以 <code>[ebp-8]</code> 为首地址 根据偏移进行 参数的传递与计算</p>
<p><img src="/images/C/2.png"></p>
<p>全局函数通过之前压入栈的参数进行计算</p>
<p><img src="/images/C/3.png"></p>
<p>3.堆栈平衡</p>
<p>结构体函数通过<code>push</code> <code>this指针</code> 再<code>pop</code> <code>this 指针</code> 达到的堆栈平衡 (可以说内平栈也可以说 不需要平衡堆栈)</p>
<p><img src="/images/C/4.png"></p>
<p>全局函数外平栈，通过<code>add esp,8</code>平栈</p>
<p><img src="/images/C/5.png"></p>
<h2 id="空结构体的大小"><a href="#空结构体的大小" class="headerlink" title="空结构体的大小"></a>空结构体的大小</h2><p>空结构体的大小为1字节，原因是C++编译器会在空类或空结构体中增加一个虚设的字节（有的编译器可能不止一个），以确保不同的对象都具有不同的地址。</p>
<p><img src="/images/C/image-20210604143651308.png" alt="image-20210604143651308"></p>
<h2 id="两个结构体函数"><a href="#两个结构体函数" class="headerlink" title="两个结构体函数"></a>两个结构体函数</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span>  					</span></span><br><span class="line"><span class="class">&#123;</span>  					</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Fn_1</span><span class="params">()</span>					</span></span><br><span class="line"><span class="function">	</span>&#123;				</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;Person:Fn_1()\n&quot;</span>);			</span><br><span class="line">	&#125;				</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Fn_2</span><span class="params">()</span> 					</span></span><br><span class="line"><span class="function">	</span>&#123;				</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;Person:Fn_2()%x\n&quot;</span>);			</span><br><span class="line">	&#125;				</span><br><span class="line">&#125;;  </span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person2</span>			</span></span><br><span class="line"><span class="class">&#123;</span>  				</span><br><span class="line">	<span class="keyword">int</span> x ;			</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Fn_1</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">	</span>&#123;			</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;Person:Fn_1()\n&quot;</span>);		</span><br><span class="line">	&#125;			</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Fn_2</span><span class="params">()</span> 				</span></span><br><span class="line"><span class="function">	</span>&#123;			</span><br><span class="line">		x = <span class="number">10</span>;		</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;Person:Fn_2()%x\n&quot;</span>);		</span><br><span class="line">	&#125;			</span><br><span class="line">&#125;;  				</span><br><span class="line">					</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Person* p = <span class="literal">NULL</span>;	</span><br><span class="line">	p-&gt;Fn_1();	</span><br><span class="line">	p-&gt;Fn_2();	</span><br><span class="line"></span><br><span class="line">	Person2* p = <span class="literal">NULL</span>;	</span><br><span class="line">	p-&gt;Fn_1();	</span><br><span class="line">	p-&gt;Fn_2();		</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>结构体<code>Person1</code>使用<code>Person* P = NULL;</code>调整了<code>this指针</code>的指向。但是在调用函数的时候并不需要<code>this指针</code>直接使用<code>call</code>调用即可。说明了结构体函数在底层情况下，在结构体内和结构体外没有区别</p>
<p><img src="/images/C/image-20210604144637838.png" alt="image-20210604144637838"></p>
<p>结构体<code>Person2</code>中使用的<code>this指针</code>为<code>Nullptr</code>所以无法找到成员变量</p>
<h1 id="继承-构造-析构函数"><a href="#继承-构造-析构函数" class="headerlink" title="继承 构造-析构函数"></a>继承 构造-析构函数</h1><p>构造函数用于初始化对象用</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> age;</span><br><span class="line">	<span class="keyword">int</span> level;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//构造函数</span></span><br><span class="line">	<span class="built_in">Person</span>(<span class="keyword">int</span> age, <span class="keyword">int</span> level)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;age = age;</span><br><span class="line">		<span class="keyword">this</span>-&gt;level = level;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//成员函数</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d %d\n&quot;</span>,age,level);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<p>当创建构造函数后如果有参数，必须要传参数进去使用，否则会报错</p>
<p><img src="/images/C/image-20210604162201326.png" alt="image-20210604162201326"></p>
<p>如果这里我要设置一个构造函数但现在不想使用的话可以再在构造函数后面再加一个空的构造函数即可，这里称为重载</p>
<p><img src="/images/C/image-20210604162704766.png" alt="image-20210604162704766"></p>
<p>结构体中函数名可以相同，但是参数不能相同，这样定义的好处是能够使一些功能比较相近的函数不用单独起名</p>
<p><img src="/images/C/image-20210604162949947.png" alt="image-20210604162949947"></p>
<h2 id="重载的概念"><a href="#重载的概念" class="headerlink" title="重载的概念"></a>重载的概念</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">函数名一样，函数传入的参数不一样</span><br></pre></td></tr></table></figure>



<h2 id="构造函数的特点"><a href="#构造函数的特点" class="headerlink" title="构造函数的特点"></a>构造函数的特点</h2><p>析构函数的作用为当对象不使用的时候调用，用来做一些清理的工作</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>与类同名</span><br><span class="line">    </span><br><span class="line"><span class="number">2.</span>没有返回值</span><br><span class="line">    </span><br><span class="line"><span class="number">3.</span>创建对象的时候执行</span><br><span class="line"></span><br><span class="line"><span class="number">4.</span>主要用于初始化</span><br><span class="line">    </span><br><span class="line"><span class="number">5.</span>可以有多个（最好有一个无参的），称为重载，其他函数也可以重载</span><br><span class="line">    </span><br><span class="line"><span class="number">6.</span>编译器不要求必须提供</span><br></pre></td></tr></table></figure>



<p>之前的一些参数都是栈或者全局变量，用完之后自己会销毁分配过的空间。而如果使用<code>malloc()</code>函数从堆里分配空间的话，使用之后不能够自己销毁分配过的空间，这时候我们就需要手动去销毁空间。</p>
<p><img src="/images/C/image-20210604170120376.png" alt="image-20210604170120376"></p>
<p>这个地方如果直接用<code>free()</code>对<code>malloc()</code>分配的空间进行销毁，在两个函数同时使用的情况下，第一个函数使用过后就把在堆里分配的空间销毁，导致第二个函数没有空间就导致运行不了</p>
<p><img src="/images/C/image-20210604170305208.png" alt="image-20210604170305208"></p>
<h2 id="析构函数的特点"><a href="#析构函数的特点" class="headerlink" title="析构函数的特点"></a>析构函数的特点</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、只能有一个析构函数，不能重载</span><br><span class="line">    </span><br><span class="line"><span class="number">2</span>、不能带任何参数</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>、不能带返回值</span><br><span class="line">    </span><br><span class="line"><span class="number">4</span>、主要用于清理工作</span><br><span class="line">    </span><br><span class="line"><span class="number">5</span>、编译器不要求必须提供</span><br><span class="line">    </span><br><span class="line"><span class="number">6</span>、与类同名并在最前面加~</span><br></pre></td></tr></table></figure>



<p>这里就使用到一个析构函数<code>~Person()</code>，这里可以考虑到对象不使用的时候就使用<code>free()</code>将<code>malloc()</code>分配的空间销毁掉</p>
<p><img src="/images/C/image-20210604171534833.png" alt="image-20210604171534833"></p>
<h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><p><strong>继承本质是一种数据的复制</strong></p>
<p>这里定义三个结构体，用<code>test()</code>进行调用</p>
<p><img src="/images/C/image-20210604172831323.png" alt="image-20210604172831323"></p>
<p>断点进入<code>Teacher()</code>反汇编</p>
<p><img src="/images/C/image-20210604173101279.png" alt="image-20210604173101279"></p>
<p>断点进入<code>Student()</code>反汇编</p>
<p><img src="/images/C/image-20210606203402747.png" alt="image-20210606203402747"></p>
<p>可以发现这里<code>Teacher()</code>结构体和<code>Student()</code>结构体的反汇编是相同的，而且结构体中有共用数据的成员，这里如果每次使用的时候再到结构体里面进行定义的话就会很麻烦。所以这里就会用到一个C++的继承思想</p>
<p><img src="/images/C/image-20210606203651714.png" alt="image-20210606203651714"></p>
<p>这里我把结构体内可以共用的成员放到一个新的结构体里面，然后后面结构体需要使用这两个变量的时候在结构体名称加上<code>:Person</code>即可调用这个结构体里面的成员</p>
<p>这里<code>Person</code>为父类或基类，<code>Teacher、Student</code>称为子类或派生类，在<code>void test()</code>这个函数里面的<code>t</code>称为对象或者实例</p>
<p><img src="/images/C/image-20210606203951011.png" alt="image-20210606203951011"></p>
<p>这里用一个<code>pt指针</code>把<code>t</code>对象的地址取出来，然后使用<code>pt指针</code>指向<code>Student</code>类里面的成员</p>
<p><img src="/images/C/image-20210606204927186.png" alt="image-20210606204927186"></p>
<p>可以用父类指针指向子类对象，但是只能指向子类从父类里面继承的成员，而不能指向本来存在于子类对象里面的成员</p>
<p><img src="/images/C/image-20210606205614180.png" alt="image-20210606205614180"></p>
<p>例如我这里取的是<code>sex</code>这个成员，很明显<code>sex</code>这个成员是存在于<code>Person</code>这个父类里面的，所以编译能够通过</p>
<p><img src="/images/C/image-20210606205848961.png" alt="image-20210606205848961"></p>
<p>这里我再去一个成员<code>code</code>，可以发现<code>code</code>这个成员是不存在于父类<code>Person</code>里面的，但是存在子类<code>Student</code>里面，所以这里编译是过不了的</p>
<p><img src="/images/C/image-20210606210635300.png" alt="image-20210606210635300"></p>
<p>这里如果要用父类指针访问灵活运用指针即可</p>
<p><img src="/images/C/image-20210606210430488.png" alt="image-20210606210430488"></p>
<p>用一个子类指针去指向父类成员会报错不是一个类型</p>
<p><img src="/images/C/image-20210606211200381.png" alt="image-20210606211200381"></p>
<p>这里可以强转，但是不能这么使用</p>
<p><img src="/images/C/image-20210606211520368.png" alt="image-20210606211520368"></p>
<p>因为这里子类指针的范围是比父类指针的范围要大的，如果这里强转之后会导致出现一些错误数据</p>
<p><img src="/images/C/image-20210606211735460.png" alt="image-20210606211735460"></p>
<p><img src="/images/C/image-20210606211837400.png" alt="image-20210606211837400"></p>
<h3 id="多层继承"><a href="#多层继承" class="headerlink" title="多层继承"></a>多层继承</h3><p>定义三个类，Y继承X，Z继承Y，打印一下Z的大小发现为24，说明Z继承的Y包含了X</p>
<p><img src="/images/C/image-20210606212249439.png" alt="image-20210606212249439"></p>
<p>添加数据观察反汇编可以看到继承了Y和X</p>
<p><img src="/images/C/image-20210606212755157.png" alt="image-20210606212755157"></p>
<p><img src="/images/C/image-20210606212744228.png" alt="image-20210606212744228"></p>
<p>这里尝试用X的指针、Y的指针访问Z的成员，都能够访问到，这里三个结构体的指针都是指向开头</p>
<p><img src="/images/C/image-20210606213111427.png" alt="image-20210606213111427"></p>
<p><img src="/images/C/image-20210606213038727.png" alt="image-20210606213038727"></p>
<p>这里一个特殊情况，如果子类里面有跟父类同名的成员，分配的空间不变。原因是因为在最后都会转换成二进制代码，编译器不会管这两个成员是否相同，还是会分配空间</p>
<p><img src="/images/C/image-20210606214222157.png" alt="image-20210606214222157"></p>
<p>如果要对同名成员进行赋值，需要具体指明给哪个成员赋值，如<code>z.X::a = 1;</code>、<code>z.Y::a = 3;</code></p>
<p><img src="/images/C/image-20210606214632336.png" alt="image-20210606214632336"></p>
<p>但是这里的反汇编还是跟之前的相同</p>
<p><img src="/images/C/image-20210606214939474.png" alt="image-20210606214939474"></p>
<h3 id="多重继承"><a href="#多重继承" class="headerlink" title="多重继承"></a>多重继承</h3><p>这里Z结构体直接继承了X、Y两个类，打印一下Z结构体的大小，发现还是24，而且反汇编跟之前也是没有区别的</p>
<p><img src="/images/C/image-20210606215725725.png" alt="image-20210606215725725"></p>
<p><img src="/images/C/image-20210606215928685.png" alt="image-20210606215928685"></p>
<p>一般不建议使用多重继承是因为多重继承的指针并不都是指向开头，所以增加了程序的复杂度，容易出错</p>
<p>微软建议使用单继承，如果需要多重继承可以改为多层继承</p>
<p><img src="/images/C/image-20210606220513996.png" alt="image-20210606220513996"></p>
<h2 id="析构-继承练习题"><a href="#析构-继承练习题" class="headerlink" title="析构 继承练习题"></a>析构 继承练习题</h2><p>题目如下</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>编写DateInfo()结构体，内容如下：</span><br><span class="line">(<span class="number">1</span>)有三个成员： <span class="keyword">int</span> year; <span class="keyword">int</span> month;<span class="keyword">int</span> day;							</span><br><span class="line">(<span class="number">2</span>)要求有个带参数的构造函数，其参数分别为对应年、月、日。							</span><br><span class="line">(<span class="number">3</span>)有一个无参数的构造函数，其初始的年、月、日分别为：<span class="number">2015</span>、<span class="number">4</span>、<span class="number">2</span>。							</span><br><span class="line">(<span class="number">4</span>)要求有一个成员函数实现日期的设置：SetDay(<span class="keyword">int</span> day)							</span><br><span class="line">(<span class="number">5</span>)要求有一个成员函数实现日期的获取: GetDay()							</span><br><span class="line">(<span class="number">6</span>)要求有一个成员函数实现年份的设置: SetYear(<span class="keyword">int</span> year)							</span><br><span class="line">(<span class="number">7</span>)要求有一个成员函数实现年份的获取: GetYear()							</span><br><span class="line">(<span class="number">8</span>)要求有一个成员函数实现月份的设置: SetMonth(<span class="keyword">int</span> month)							</span><br><span class="line">(<span class="number">9</span>)要求有一个成员函数实现月份的获取: GetMonth()	</span><br><span class="line">    </span><br><span class="line"><span class="number">2.</span>设计一个结构TimeInfo,要求其满足下述要求。							</span><br><span class="line">(<span class="number">1</span>)该结构中包含表示时间的时、分、秒。							</span><br><span class="line">(<span class="number">2</span>)设置该结构中时、分、秒的函数。							</span><br><span class="line">(<span class="number">3</span>)获取该结构中时、分、秒的三个函数：GetHour(),GetMinute()和GetSecond()。</span><br><span class="line">    </span><br><span class="line"><span class="number">3.</span>让TimeInfo继承DateInfo 分别使用DataInfo和TimeInfo的指针访问TimeInfo对象的成员。</span><br><span class="line">    </span><br><span class="line"><span class="number">4.</span>设计一个结构叫做MyString，要求该结构能够完成以下功能：							</span><br><span class="line">(<span class="number">1</span>)构造函数能够根据实际传入的参数分配实际存储空间；							</span><br><span class="line">(<span class="number">2</span>)提供一个无参的构造函数，默认分配大小为<span class="number">1024</span>个字节；							</span><br><span class="line">(<span class="number">3</span>)析构函数释放该空间；							</span><br><span class="line">(<span class="number">4</span>)编写成员函数SetString，可以将一个字符串赋值给该结构；							</span><br><span class="line">(<span class="number">5</span>)编写成员函数PrintString，可以将该结构的内容打印到屏幕上；							</span><br><span class="line">(<span class="number">6</span>)编写成员函数AppendString，用于向已有的数据后面添加数据；							</span><br><span class="line">(<span class="number">7</span>)编写成员函数Size，用于得到当前数据的真实长度。							</span><br><span class="line">编写测试程序，测试这个结构。</span><br></pre></td></tr></table></figure>



<p>代码如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;malloc.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;memory.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">DateInfo</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> year;</span><br><span class="line">	<span class="keyword">int</span> month;</span><br><span class="line">	<span class="keyword">int</span> day;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">DateInfo</span> (<span class="keyword">int</span> year,<span class="keyword">int</span> month,<span class="keyword">int</span> day)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;year = year;</span><br><span class="line">		<span class="keyword">this</span>-&gt;month = month;</span><br><span class="line">		<span class="keyword">this</span>-&gt;day = day;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">DateInfo</span> ()</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;year = <span class="number">2015</span>;</span><br><span class="line">		<span class="keyword">this</span>-&gt;month = <span class="number">4</span>;</span><br><span class="line">		<span class="keyword">this</span>-&gt;day = <span class="number">2</span>;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">SetDay</span><span class="params">(<span class="keyword">int</span> day)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;day = day;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;The date is:%d年%d月%d日\n&quot;</span>,year,month,day);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">GetDay</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;The day of date is:%d\n&quot;</span>,day);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">SetYear</span><span class="params">(<span class="keyword">int</span> year)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;year = year;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;The date is:%d年%d月%d日\n&quot;</span>,year,month,day);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">GetYear</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;The year of date is:%d\n&quot;</span>,year);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">SetMonth</span><span class="params">(<span class="keyword">int</span> month)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;month = month;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;The date is:%d年%d月%d日\n&quot;</span>,year,month,day);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">GetMonth</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;The month of date is:%d\n&quot;</span>,month);	</span><br><span class="line">			</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printDateInfo</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">SetDay</span>(<span class="number">23</span>);</span><br><span class="line">	<span class="built_in">GetDay</span>();</span><br><span class="line"></span><br><span class="line">	<span class="built_in">SetYear</span>(<span class="number">2021</span>);</span><br><span class="line">	<span class="built_in">GetYear</span>();</span><br><span class="line"></span><br><span class="line">	<span class="built_in">SetMonth</span>(<span class="number">6</span>);</span><br><span class="line">	<span class="built_in">GetMonth</span>();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义TimeInfo结构体继承DateInfo</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">TimeInfo</span>:</span>DateInfo</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">int</span> hour;</span><br><span class="line">	<span class="keyword">int</span> minute;</span><br><span class="line">	<span class="keyword">int</span> second;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">TimeInfo</span> (<span class="keyword">int</span> hour,<span class="keyword">int</span> minute,<span class="keyword">int</span> second)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;hour = hour;</span><br><span class="line">		<span class="keyword">this</span>-&gt;minute = minute;</span><br><span class="line">		<span class="keyword">this</span>-&gt;second = second;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">TimeInfo</span>()</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;hour = <span class="number">12</span>;</span><br><span class="line">		<span class="keyword">this</span>-&gt;minute = <span class="number">8</span>;</span><br><span class="line">		<span class="keyword">this</span>-&gt;second = <span class="number">28</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">GetHour</span><span class="params">(<span class="keyword">int</span> hour)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;hour = hour;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">GetMinute</span><span class="params">(<span class="keyword">int</span> minute)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;minute = minute;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">GetSecond</span><span class="params">(<span class="keyword">int</span> second)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;second = second;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printTimeinfo</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">GetHour</span>(<span class="number">10</span>);</span><br><span class="line">	<span class="built_in">GetMinute</span>(<span class="number">25</span>);</span><br><span class="line">	<span class="built_in">GetSecond</span>(<span class="number">55</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//输出DataInfo和TimeInfo的成员信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrintDataInfo_TimeInfo</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	DateInfo d;</span><br><span class="line">	TimeInfo t;</span><br><span class="line">	</span><br><span class="line">	DateInfo* pd = &amp;d;</span><br><span class="line">	TimeInfo* pt = &amp;t;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//使用DateInfo指针指向DateInfo的成员</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***************DateInfo指针指向DateInfo成员***************\n\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;The day is:%d\n&quot;</span>,pd-&gt;day);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;The month is:%d\n&quot;</span>,pd-&gt;month);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;The year is:%d\n\n&quot;</span>,pd-&gt;year);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//使用TimeInfo指针指向DateInfo的成员</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***************TimeInfo指针指向DateInfo成员***************\n\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;The day is:%d\n&quot;</span>, pt-&gt;day);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;The month is:%d\n&quot;</span>, pt-&gt;month);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;The year is:%d\n\n&quot;</span>, pt-&gt;year);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//使用TimeInfo指针指向TimeInfo的成员</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***************TimeInfo指针指向TimeInfo成员***************\n\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;The second is:%d\n&quot;</span>,pt-&gt;second);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;The minute is:%d\n&quot;</span>,pt-&gt;minute);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;The hour is:%d\n\n&quot;</span>,pt-&gt;hour);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">MyString</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">void</span>* MyMalloc;</span><br><span class="line">	<span class="keyword">int</span> temp;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//构造函数能够根据实际传入的参数分配实际存储空间</span></span><br><span class="line">	<span class="built_in">MyString</span>(<span class="keyword">int</span> temp)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;temp = temp;</span><br><span class="line">		MyMalloc = <span class="built_in">malloc</span>(<span class="keyword">this</span>-&gt;temp);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span>(!MyMalloc)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;Destructor allocated memory failed,please try again!\n\n&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;Destructor allocated memory successfully!\n\n&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">memset</span>(MyMalloc , <span class="number">0</span>, temp);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//提供一个无参的构造函数，默认分配大小为1024个字节</span></span><br><span class="line">	<span class="built_in">MyString</span>()</span><br><span class="line">	&#123;</span><br><span class="line">		MyMalloc = <span class="built_in">malloc</span>(<span class="number">1024</span>);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span>(!MyMalloc)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;Destructor allocated memory failed,please try again!\n\n&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;Destructor allocated memory successfully!\n\n&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">memset</span>(MyMalloc, <span class="number">0</span>, <span class="number">1024</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//析构函数释放该空间</span></span><br><span class="line">	~<span class="built_in">MyString</span>()</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">free</span>(MyMalloc);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;Destructor executed successfully!&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//编写成员函数SetString，可以将一个字符串赋值给该结构</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">SetString</span><span class="params">(<span class="keyword">char</span>* str)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">strcpy</span>((<span class="keyword">char</span>*)MyMalloc, str);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//编写成员函数PrintString，可以将该结构的内容打印到屏幕上</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">PrintString</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;The string is:%s\n\n&quot;</span>, MyMalloc);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//编写成员函数AppendString，用于向已有的数据后面添加数据</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">AppendString</span><span class="params">(<span class="keyword">char</span>* addStr)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">strcat</span>((<span class="keyword">char</span>*)MyMalloc, addStr);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//编写成员函数Size，用于得到当前数据的真实长度</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Size</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">int</span>	length = <span class="built_in">strlen</span>((<span class="keyword">char</span>*)MyMalloc);</span><br><span class="line"></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;The size of the data is:%dbytes!\n\n&quot;</span>, length);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//打印MyString信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrintMyStringMessage</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***************打印MyString信息***************\n\n&quot;</span>);</span><br><span class="line">	MyString s;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">char</span> str1[] = <span class="string">&quot;Drunk&quot;</span>;</span><br><span class="line">	s.<span class="built_in">SetString</span>(str1);</span><br><span class="line">	s.<span class="built_in">PrintString</span>();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">char</span> str2[] = <span class="string">&quot;mars&quot;</span>;</span><br><span class="line">	s.<span class="built_in">AppendString</span>(str2);</span><br><span class="line">	s.<span class="built_in">PrintString</span>();</span><br><span class="line"></span><br><span class="line">	s.<span class="built_in">Size</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">PrintDataInfo_TimeInfo</span>();</span><br><span class="line">	<span class="built_in">PrintMyStringMessage</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>最后输出结果如下</p>
<p><img src="/images/C/image-20210607112229073.png" alt="image-20210607112229073"></p>
<h1 id="权限控制"><a href="#权限控制" class="headerlink" title="权限控制"></a>权限控制</h1><h2 id="优化代码"><a href="#优化代码" class="headerlink" title="优化代码"></a>优化代码</h2><p>将定义和代码分离，代码会有更好的可读性，但不是必须的</p>
<p>把结构体定义放到<code>xxx.h</code>文件内，把使用成员的函数放到<code>xxx.cpp</code>文件里面。这里有几个注意的点：</p>
<p>1.<code>xxx.h</code> 只是一个文件，可以是任何的后缀名</p>
<p>2.<code>#include</code>的作用是把里面的内容复制过来，如<code>#include &quot;stdaxf.h&quot;</code></p>
<p>3.<code>xxx.h</code>和<code>xxx.cpp</code>不一定同名</p>
<p>这里我把结构体定义放到<code>StdAfx.h</code>头文件里，把函数的使用放到<code>C_4.cpp</code>文件里</p>
<p><img src="/images/C/image-20210607163202504.png" alt="image-20210607163202504"></p>
<p><img src="/images/C/image-20210607163257529.png" alt="image-20210607163257529"></p>
<h2 id="权限控制-1"><a href="#权限控制-1" class="headerlink" title="权限控制"></a>权限控制</h2><p>权限控制这里用到<code>private</code>和<code>public</code>两个关键字，在外部调用的时候，<code>private</code>只能自己使用，<code>public</code>可以公用</p>
<p>所以在结构体外调用关键字为<code>private</code>的成员时会报错，而调用<code>public</code>成员则不会报错</p>
<p><img src="/images/C/image-20210607164837536.png" alt="image-20210607164837536"></p>
<p><img src="/images/C/image-20210607164810347.png" alt="image-20210607164810347"></p>
<p>但是如果在结构体里调用<code>private</code>成员则可以调用</p>
<p><img src="/images/C/image-20210607165746482.png" alt="image-20210607165746482"></p>
<p>对于<code>private</code>和<code>public</code>关键字的总结：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、对外提供的函数或者变量，发布成<span class="keyword">public</span>的，但不能随意改动。						</span><br><span class="line">							</span><br><span class="line"><span class="number">2</span>、可能会变动的函数或者变量，定义成<span class="keyword">private</span>的 这样编译器会在使用的时候做检测。						</span><br><span class="line">							</span><br><span class="line"><span class="number">3</span>、只有结构体内部的函数才可以访问<span class="keyword">private</span>的成员。	</span><br><span class="line">							</span><br><span class="line"><span class="number">4</span>、<span class="keyword">public</span>/<span class="keyword">private</span>可以修饰函数也可以修饰变量。			</span><br></pre></td></tr></table></figure>



<p>这里在结构体里面定义的成员一般是不会改变它的值的，但是有一些特殊情况需要改动成员的值的时候，我们就可以给成员函数定义为<code>private</code>，再在结构体里面定义一个使用它的函数即可</p>
<p>这里定义一个<code>SetAge()</code>判断输入的年龄是否合理、<code>GetAge()</code>输出年龄的值</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">SetAge</span><span class="params">(<span class="keyword">int</span> age)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(age &gt; <span class="number">150</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">this</span>-&gt;age = <span class="number">0</span>;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;The age is error,please try again!&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">this</span>-&gt;age = age;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">GetAge</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> age;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>这里我首先输入一个超过年龄的数字看一下返回值</p>
<p><img src="/images/C/image-20210607172136245.png" alt="image-20210607172136245"></p>
<p>再输入一个正常的年龄，如图所示</p>
<p><img src="/images/C/image-20210607172209984.png" alt="image-20210607172209984"></p>
<h2 id="private深入探讨"><a href="#private深入探讨" class="headerlink" title="private深入探讨"></a>private深入探讨</h2><p>这里我用设置一个<code>private</code>成员x和一个<code>public</code>成员y，虽然<code>private</code>不能继承到子类，但是可以看到这里还是分配了8字节的空间</p>
<p><img src="/images/C/image-20210607184301704.png" alt="image-20210607184301704"></p>
<h2 id="class和struct的区别"><a href="#class和struct的区别" class="headerlink" title="class和struct的区别"></a>class和struct的区别</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>编译器中默认<span class="class"><span class="keyword">class</span>中的成员为<span class="title">private</span>，默认<span class="keyword">struct</span>中的成员为<span class="title">public</span></span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class">2.父类中的程序继承后变成<span class="title">private</span>属性</span></span><br></pre></td></tr></table></figure>



<p>这里我用<code>class</code>就会显示<code>cannot access private member</code>，是因为<code>class</code>的成员默认是<code>private</code>属性</p>
<p><img src="/images/C/image-20210607185657747.png" alt="image-20210607185657747"></p>
<p>而使用<code>struct</code>的话则不会报错，因为默认为<code>public</code>属性</p>
<p><img src="/images/C/image-20210607185531793.png" alt="image-20210607185531793"></p>
<p>继承同理，这里先使用<code>struct</code>继承父类是能够访问到父类成员的</p>
<p><img src="/images/C/image-20210607190218744.png" alt="image-20210607190218744"></p>
<p>但是这里如果直接使用<code>class</code>则会报错，是因为<code>class</code>会默认继承父类时的类型为<code>private</code></p>
<p><img src="/images/C/image-20210607190333614.png" alt="image-20210607190333614"></p>
<p>如果不希望改变成员属性需要给成员加上<code>public</code>属性</p>
<p><img src="/images/C/image-20210607190636541.png" alt="image-20210607190636541"></p>
<h2 id="private是否被继承"><a href="#private是否被继承" class="headerlink" title="private是否被继承"></a>private是否被继承</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>父类中的私有成员是会被继承的</span><br><span class="line">    </span><br><span class="line"><span class="number">2.</span>但是编译器不允许直接对父类中的私有成员进行访问</span><br></pre></td></tr></table></figure>



<p><code>private</code>只能在<code>class</code>类里面定义函数使用，其他继承的子类一律不能使用</p>
<p>这里我定义一个<code>Base</code>的类且成员类型为<code>private</code>，定义一个<code>Sub</code>的类继承<code>Base</code>类，打印<code>Sub</code>大小为16证明父类成员还是会被继承</p>
<p><img src="/images/C/image-20210607192102481.png" alt="image-20210607192102481"></p>
<p>这里我只调用了子类<code>Sub</code>，但是可以看到<code>Base()</code>函数中的输出语句被执行了，证明<code>Base()</code>也得到了调用</p>
<p><img src="/images/C/image-20210607193523050.png" alt="image-20210607193523050"></p>
<p>在<code>Sub s</code>处设置一个断点进入反汇编，发现这里调用了一个地址</p>
<p><img src="/images/C/image-20210607193720830.png" alt="image-20210607193720830"></p>
<p>反汇编跟进去，发现这里是<code>sub</code>的构造函数，这个<code>sub</code>的构造函数我们是没有定义的，这里是编译器替我们生成的</p>
<p><img src="/images/C/image-20210607193826221.png" alt="image-20210607193826221"></p>
<p>继续往下跟发现这里调用了<code>Base</code>的构造函数</p>
<p><img src="/images/C/image-20210607193912380.png" alt="image-20210607193912380"></p>
<p>F11跟进构造函数</p>
<p><img src="/images/C/image-20210607193935408.png" alt="image-20210607193935408"></p>
<p>最终发现来到了<code>Base()</code>这个位置</p>
<p><img src="/images/C/image-20210607193956869.png" alt="image-20210607193956869"></p>
<p>这里说明先运行父类的构造函数，再执行子类的构造函数</p>
<p>为了进一步验证猜想改进代码如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span>			</span></span><br><span class="line"><span class="class">&#123;</span>			</span><br><span class="line"><span class="keyword">public</span>:			</span><br><span class="line">	<span class="built_in">Base</span>()		</span><br><span class="line">	&#123;	</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;This is Base&#x27;s constructor!\n&quot;</span>);</span><br><span class="line">		x = <span class="number">11</span>;	</span><br><span class="line">		y = <span class="number">12</span>;	</span><br><span class="line">	&#125;		</span><br><span class="line"><span class="keyword">private</span>:			</span><br><span class="line">	<span class="keyword">int</span> x;		</span><br><span class="line">	<span class="keyword">int</span> y;		</span><br><span class="line">&#125;;</span><br><span class="line">	</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sub</span>:</span><span class="keyword">public</span> Base			</span><br><span class="line">&#123;			</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Sub</span>()</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;This is Sub&#x27;s constructor!\n&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> a;		</span><br><span class="line">	<span class="keyword">int</span> b;		</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<p>运行结果如下</p>
<p><img src="/images/C/image-20210607194517709.png" alt="image-20210607194517709"></p>
<p>我们上面已经论证了父类是会继承到子类的，所以这里尝试用指针进行访问</p>
<p><img src="/images/C/image-20210607194919809.png" alt="image-20210607194919809"></p>
<h2 id="C-权限控制练习题"><a href="#C-权限控制练习题" class="headerlink" title="C++权限控制练习题"></a>C++权限控制练习题</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">将上一节课的所有练习改为<span class="class"><span class="keyword">class</span>实现</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">1、添加<span class="title">private</span>/<span class="title">public</span>进行权限控制</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">2、将类的定义与实现分开来写：定义写到<span class="title">xxx</span>.<span class="title">h</span>中 函数实现写在<span class="title">xxx</span>.<span class="title">cpp</span>中</span></span><br></pre></td></tr></table></figure>



<p>实现代码如下：</p>
<p>PS:PrintDateInfo_TimeInfo()函数因为权限问题暂未实现，明日补上</p>
<p>.h:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//class DateInfo</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DateInfo</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">int</span> year;</span><br><span class="line">	<span class="keyword">int</span> month;</span><br><span class="line">	<span class="keyword">int</span> day;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">DateInfo</span> (<span class="keyword">int</span> year,<span class="keyword">int</span> month,<span class="keyword">int</span> day);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">DateInfo</span> ();</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">SetDay</span><span class="params">(<span class="keyword">int</span> day)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">GetDay</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">SetYear</span><span class="params">(<span class="keyword">int</span> year)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">GetYear</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">SetMonth</span><span class="params">(<span class="keyword">int</span> month)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">GetMonth</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">printDateInfo</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//class TimeInfo::public DateInfo</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TimeInfo</span>:</span><span class="keyword">public</span> DateInfo</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">int</span> hour;</span><br><span class="line">	<span class="keyword">int</span> minute;</span><br><span class="line">	<span class="keyword">int</span> second;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">TimeInfo</span> (<span class="keyword">int</span> hour,<span class="keyword">int</span> minute,<span class="keyword">int</span> second);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">TimeInfo</span>();</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">GetHour</span><span class="params">(<span class="keyword">int</span> hour)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">GetMinute</span><span class="params">(<span class="keyword">int</span> minute)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">GetSecond</span><span class="params">(<span class="keyword">int</span> second)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">printTimeinfo</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrintDateInfo_TimeInfo</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//class MyString</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyString</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">void</span>* MyMalloc;</span><br><span class="line">	<span class="keyword">int</span> temp;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="comment">//构造函数能够根据实际传入的参数分配实际存储空间</span></span><br><span class="line">	<span class="built_in">MyString</span>(<span class="keyword">int</span> temp);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//提供一个无参的构造函数，默认分配大小为1024个字节</span></span><br><span class="line">	<span class="built_in">MyString</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//析构函数释放该空间</span></span><br><span class="line">	~<span class="built_in">MyString</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//编写成员函数SetString，可以将一个字符串赋值给该结构</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">SetString</span><span class="params">(<span class="keyword">char</span>* str)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//编写成员函数PrintString，可以将该结构的内容打印到屏幕上</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">PrintString</span><span class="params">()</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//编写成员函数AppendString，用于向已有的数据后面添加数据</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">AppendString</span><span class="params">(<span class="keyword">char</span>* addStr)</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//编写成员函数Size，用于得到当前数据的真实长度</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Size</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//打印MyString信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrintMyStringMessage</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>



<p>.cpp:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;malloc.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;memory.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//class DateInfo</span></span><br><span class="line"></span><br><span class="line">	DateInfo::<span class="built_in">DateInfo</span> (<span class="keyword">int</span> year,<span class="keyword">int</span> month,<span class="keyword">int</span> day)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;year = year;</span><br><span class="line">		<span class="keyword">this</span>-&gt;month = month;</span><br><span class="line">		<span class="keyword">this</span>-&gt;day = day;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	DateInfo::<span class="built_in">DateInfo</span> ()</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;year = <span class="number">2015</span>;</span><br><span class="line">		<span class="keyword">this</span>-&gt;month = <span class="number">4</span>;</span><br><span class="line">		<span class="keyword">this</span>-&gt;day = <span class="number">2</span>;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">DateInfo::SetDay</span><span class="params">(<span class="keyword">int</span> day)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;day = day;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;The date is:%d年%d月%d日\n&quot;</span>,year,month,day);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">DateInfo::GetDay</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;The day of date is:%d\n&quot;</span>,day);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">DateInfo::SetYear</span><span class="params">(<span class="keyword">int</span> year)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;year = year;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;The date is:%d年%d月%d日\n&quot;</span>,year,month,day);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">DateInfo::GetYear</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;The year of date is:%d\n&quot;</span>,year);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">DateInfo::SetMonth</span><span class="params">(<span class="keyword">int</span> month)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;month = month;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;The date is:%d年%d月%d日\n&quot;</span>,year,month,day);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">DateInfo::GetMonth</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;The month of date is:%d\n&quot;</span>,month);	</span><br><span class="line">			</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">DateInfo::printDateInfo</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">SetDay</span>(<span class="number">23</span>);</span><br><span class="line">		<span class="built_in">GetDay</span>();</span><br><span class="line"></span><br><span class="line">		<span class="built_in">SetYear</span>(<span class="number">2021</span>);</span><br><span class="line">		<span class="built_in">GetYear</span>();</span><br><span class="line"></span><br><span class="line">		<span class="built_in">SetMonth</span>(<span class="number">6</span>);</span><br><span class="line">		<span class="built_in">GetMonth</span>();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//class TimeInfo:DateInfo</span></span><br><span class="line"></span><br><span class="line">	TimeInfo::<span class="built_in">TimeInfo</span> (<span class="keyword">int</span> hour,<span class="keyword">int</span> minute,<span class="keyword">int</span> second)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;hour = hour;</span><br><span class="line">		<span class="keyword">this</span>-&gt;minute = minute;</span><br><span class="line">		<span class="keyword">this</span>-&gt;second = second;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	TimeInfo::<span class="built_in">TimeInfo</span>()</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;hour = <span class="number">12</span>;</span><br><span class="line">		<span class="keyword">this</span>-&gt;minute = <span class="number">8</span>;</span><br><span class="line">		<span class="keyword">this</span>-&gt;second = <span class="number">28</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">TimeInfo::GetHour</span><span class="params">(<span class="keyword">int</span> hour)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;hour = hour;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">TimeInfo::GetMinute</span><span class="params">(<span class="keyword">int</span> minute)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;minute = minute;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">TimeInfo::GetSecond</span><span class="params">(<span class="keyword">int</span> second)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;second = second;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">TimeInfo::printTimeinfo</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">GetHour</span>(<span class="number">10</span>);</span><br><span class="line">		<span class="built_in">GetMinute</span>(<span class="number">25</span>);</span><br><span class="line">		<span class="built_in">GetSecond</span>(<span class="number">55</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">void PrintDateInfo_TimeInfo()</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">	DateInfo d;</span></span><br><span class="line"><span class="comment">	TimeInfo t;</span></span><br><span class="line"><span class="comment">	</span></span><br><span class="line"><span class="comment">	DateInfo* pd = &amp;d;</span></span><br><span class="line"><span class="comment">	TimeInfo* pt = &amp;t;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	//使用DateInfo指针指向DateInfo的成员</span></span><br><span class="line"><span class="comment">	printf(&quot;***************DateInfo指针指向DateInfo成员***************\n\n&quot;);</span></span><br><span class="line"><span class="comment">	printf(&quot;The day is:%d\n&quot;,pd-&gt;day);</span></span><br><span class="line"><span class="comment">	printf(&quot;The month is:%d\n&quot;,pd-&gt;month);</span></span><br><span class="line"><span class="comment">	printf(&quot;The year is:%d\n\n&quot;,pd-&gt;year);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	//使用TimeInfo指针指向DateInfo的成员</span></span><br><span class="line"><span class="comment">	printf(&quot;***************TimeInfo指针指向DateInfo成员***************\n\n&quot;);</span></span><br><span class="line"><span class="comment">	printf(&quot;The day is:%d\n&quot;, pt-&gt;day);</span></span><br><span class="line"><span class="comment">	printf(&quot;The month is:%d\n&quot;, pt-&gt;month);</span></span><br><span class="line"><span class="comment">	printf(&quot;The year is:%d\n\n&quot;, pt-&gt;year);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	//使用TimeInfo指针指向TimeInfo的成员</span></span><br><span class="line"><span class="comment">	printf(&quot;***************TimeInfo指针指向TimeInfo成员***************\n\n&quot;);</span></span><br><span class="line"><span class="comment">	printf(&quot;The second is:%d\n&quot;,pt-&gt;second);</span></span><br><span class="line"><span class="comment">	printf(&quot;The minute is:%d\n&quot;,pt-&gt;minute);</span></span><br><span class="line"><span class="comment">	printf(&quot;The hour is:%d\n\n&quot;,pt-&gt;hour);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//class MyString</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//构造函数能够根据实际传入的参数分配实际存储空间</span></span><br><span class="line">	MyString::<span class="built_in">MyString</span>(<span class="keyword">int</span> temp)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;temp = temp;</span><br><span class="line">		MyMalloc = <span class="built_in">malloc</span>(<span class="keyword">this</span>-&gt;temp);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span>(!MyMalloc)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;Destructor allocated memory failed,please try again!\n\n&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;Destructor allocated memory successfully!\n\n&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">memset</span>(MyMalloc , <span class="number">0</span>, temp);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//提供一个无参的构造函数，默认分配大小为1024个字节</span></span><br><span class="line">	MyString::<span class="built_in">MyString</span>()</span><br><span class="line">	&#123;</span><br><span class="line">		MyMalloc = <span class="built_in">malloc</span>(<span class="number">1024</span>);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span>(!MyMalloc)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;Destructor allocated memory failed,please try again!\n\n&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;Destructor allocated memory successfully!\n\n&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">memset</span>(MyMalloc, <span class="number">0</span>, <span class="number">1024</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//析构函数释放该空间</span></span><br><span class="line">	MyString::~<span class="built_in">MyString</span>()</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">free</span>(MyMalloc);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;Destructor executed successfully!&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//编写成员函数SetString，可以将一个字符串赋值给该结构</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">MyString::SetString</span><span class="params">(<span class="keyword">char</span>* str)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">strcpy</span>((<span class="keyword">char</span>*)MyMalloc, str);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//编写成员函数PrintString，可以将该结构的内容打印到屏幕上</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">MyString::PrintString</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;The string is:%s\n\n&quot;</span>, MyMalloc);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//编写成员函数AppendString，用于向已有的数据后面添加数据</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">MyString::AppendString</span><span class="params">(<span class="keyword">char</span>* addStr)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">strcat</span>((<span class="keyword">char</span>*)MyMalloc, addStr);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//编写成员函数Size，用于得到当前数据的真实长度</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">MyString::Size</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">int</span>	length = <span class="built_in">strlen</span>((<span class="keyword">char</span>*)MyMalloc);</span><br><span class="line"></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;The size of the data is:%dbytes!\n\n&quot;</span>, length);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//打印MyString信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrintMyStringMessage</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***************打印MyString信息***************\n\n&quot;</span>);</span><br><span class="line">	MyString s;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">char</span> str1[] = <span class="string">&quot;Drunk&quot;</span>;</span><br><span class="line">	s.<span class="built_in">SetString</span>(str1);</span><br><span class="line">	s.<span class="built_in">PrintString</span>();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">char</span> str2[] = <span class="string">&quot;mars&quot;</span>;</span><br><span class="line">	s.<span class="built_in">AppendString</span>(str2);</span><br><span class="line">	s.<span class="built_in">PrintString</span>();</span><br><span class="line"></span><br><span class="line">	s.<span class="built_in">Size</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//PrintDateInfo_TimeInfo();</span></span><br><span class="line">	<span class="built_in">PrintMyStringMessage</span>();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="虚函数表"><a href="#虚函数表" class="headerlink" title="虚函数表"></a>虚函数表</h1><h2 id="虚函数：间接调用"><a href="#虚函数：间接调用" class="headerlink" title="虚函数：间接调用"></a>虚函数：间接调用</h2><p>直接调用：E8    call 地址</p>
<p>间接调用（IAT表）：FF    call […]</p>
<p>通过对象直接调用函数生成的反汇编代码相同</p>
<p><img src="/images/C/image-20210608222837038.png" alt="image-20210608222837038"></p>
<p><img src="/images/C/image-20210608222959586.png" alt="image-20210608222959586"></p>
<p>使用指针调用函数</p>
<p><img src="/images/C/image-20210608223119163.png" alt="image-20210608223119163"></p>
<p>发现<code>void</code>为E8直接调用，<code>virtual void</code>为FF间接调用</p>
<p><img src="/images/C/image-20210608223201780.png" alt="image-20210608223201780"></p>
<h2 id="深入虚函数调用"><a href="#深入虚函数调用" class="headerlink" title="深入虚函数调用"></a>深入虚函数调用</h2><p><strong>当类中有虚函数时会多一个4字节的属性，无论有多少个<code>virtual</code>都只会增加4字节</strong></p>
<p><img src="/images/C/image-20210608223817747.png" alt="image-20210608223817747"></p>
<p>定义一个构造函数</p>
<p><img src="/images/C/image-20210608224147017.png" alt="image-20210608224147017"></p>
<p>查看一下<code>base</code>里面存的数据</p>
<p><img src="/images/C/image-20210608224308866.png" alt="image-20210608224308866"></p>
<p>在一个对象加一个<code>virtual</code>时，会在首地址多出来4字节，即<code>0012FF74 20 20 42 00</code>，这里对应的<code>virtual</code>的地址为<code>422020</code></p>
<p><img src="/images/C/image-20210608224420817.png" alt="image-20210608224420817"></p>
<p>在<code>422020</code>这个地址得到<code>1E 10 40 00</code></p>
<p><img src="/images/C/image-20210608224632596.png" alt="image-20210608224632596"></p>
<p>这里使用一个<code>Base*</code>指针去访问下<code>Function_1()</code>这个函数，进到反汇编，F10单步往下跟得到ecx分别为第一个<code>virtual</code>成员、x、y</p>
<p><img src="/images/C/image-20210608225210635.png" alt="image-20210608225210635"></p>
<p>现在ecx为<code>0012FF74</code>这个地址，<code>edx,dword ptr [ecx]</code>即取ecx里面的4个字节(<code>DWORD</code>)赋给edx，即edx=<code>42201C</code></p>
<p><img src="/images/C/image-20210608225806286.png" alt="image-20210608225806286"></p>
<p><code>call dword ptr [edx]</code>这个语句是用来取edx这个地址里面的值，即<code>42201C</code>这个地址里面的值为<code>1E 10 40 00</code></p>
<p><img src="/images/C/image-20210608230545746.png" alt="image-20210608230545746"></p>
<p>这里再对两个<code>virtual</code>函数的反汇编进行分析，取ecx地址里的值为<code>42201C</code></p>
<p><img src="/images/C/image-20210608231613560.png" alt="image-20210608231613560"></p>
<p>这里<code>Function_1()</code> <code>call dword ptr [edx]</code>取的值为<code>40101E</code>，<code>Function_2() </code> <code>call dword ptr [edx+4]</code>取的值为<code>401023</code></p>
<p><strong><code>virtual</code>多出来的四个字节指向一个数组，数组里面存的是当前对象所有虚函数的地址</strong></p>
<p><img src="/images/C/image-20210608231941365.png" alt="image-20210608231941365"></p>
<p><strong>ecx的首地址存放的是虚函数表</strong></p>
<p><img src="/images/C/image-20210608232545135.png" alt="image-20210608232545135"></p>
<h2 id="打印虚函数表"><a href="#打印虚函数表" class="headerlink" title="打印虚函数表"></a>打印虚函数表</h2><p>打印this指针</p>
<p><img src="/images/C/image-20210608234136872.png" alt="image-20210608234136872"></p>
<p>虚表的地址是this指针的前4个字节，使用<code>*(int*)</code>转型取前四个字节即可得到虚函数表的地址</p>
<p><img src="/images/C/image-20210608234229032.png" alt="image-20210608234229032"></p>
<p>通过函数指针调用函数验证正确性，首先定义一个新的函数类型用<code>typedef void(*pFunction)(void)</code>，后赋予变量<code>pFn</code></p>
<p>这里如果i=0时，即<code>int temp = *((int*)(*(int*)&amp;base)+0);</code>，这里就意味着取虚函数表的前4位，所以用一个循环进行遍历</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TestMethod</span><span class="params">()</span>					</span></span><br><span class="line"><span class="function"></span>&#123;					</span><br><span class="line">	<span class="comment">//查看 Sub 的虚函数表				</span></span><br><span class="line">    Base base;					</span><br><span class="line">					</span><br><span class="line">	<span class="comment">//对象的前四个字节就是虚函数表				</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;base 的虚函数表地址为:%x\n&quot;</span>,*(<span class="keyword">int</span>*)&amp;base);				</span><br><span class="line">					</span><br><span class="line">	<span class="comment">//通过函数指针调用函数，验证正确性				</span></span><br><span class="line">    <span class="function"><span class="keyword">typedef</span> <span class="title">void</span><span class="params">(*pFunction)</span><span class="params">(<span class="keyword">void</span>)</span></span>;					</span><br><span class="line">					</span><br><span class="line">	pFunction pFn;				</span><br><span class="line">					</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">2</span>;i++)				</span><br><span class="line">	&#123;				</span><br><span class="line">		<span class="keyword">int</span> temp = *((<span class="keyword">int</span>*)(*(<span class="keyword">int</span>*)&amp;base)+i);			</span><br><span class="line">		pFn = (pFunction)temp;			</span><br><span class="line">		<span class="built_in">pFn</span>();			</span><br><span class="line">	&#125;				</span><br><span class="line">									</span><br><span class="line">&#125;				</span><br></pre></td></tr></table></figure>



<p><img src="/images/C/image-20210608235042527.png" alt="image-20210608235042527"></p>
<p>对于虚函数表的总结</p>
<p><img src="/images/C/image-20210608235230884.png" alt="image-20210608235230884"></p>
<h2 id="C-虚函数表练习"><a href="#C-虚函数表练习" class="headerlink" title="C++虚函数表练习"></a>C++虚函数表练习</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、单继承无函数覆盖(打印Sub对象的虚函数表)</span><br><span class="line">    </span><br><span class="line"><span class="number">2</span>、单继承有函数覆盖(打印Sub对象的虚函数表)</span><br></pre></td></tr></table></figure>



<p><strong>对于单继承有函数覆盖继承的研究</strong></p>
<p>结构体如下：</p>
<p><img src="/images/C/image-20210609111825635.png" alt="image-20210609111825635"></p>
<p>这里取一个<code>Sub1</code>的指针，使用指针的时候发现只能够指向<code>Function</code>1.2.3.6，猜测相同的覆盖的函数只取一个进入虚函数表</p>
<p><img src="/images/C/image-20210609111742780.png" alt="image-20210609111742780"></p>
<p>这里使用<code>ps</code>指针指向<code>Function_1</code>进入反汇编进行查看，<code>[ecx]</code>对应的值为<code>42329C</code>，跳转到<code>42329C</code>即虚函数表的地址</p>
<p><img src="/images/C/image-20210609112041133.png" alt="image-20210609112041133"></p>
<p>进入<code>42329C</code>这个虚函数表地址后可以发现，虚函数表里只有4个数组，所以可以证明在子类含有父类的函数时使用自身的函数，子类中不含父类函数时把函数复制到虚函数表里面</p>
<p><img src="/images/C/image-20210609112147302.png" alt="image-20210609112147302"></p>
<p>总结：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1.在单继承无函数覆盖的情况下，先继承父类的虚函数表，再是自己虚函数表的地址</span><br><span class="line"></span><br><span class="line">2.在单继承有函数覆盖的情况下，base为父类有三个virtual函数，所以在虚函数表里面有3个连续的函数地址</span><br><span class="line"></span><br><span class="line">3.在单继承有函数覆盖的情况下，sub为子类继承base有重复名的函数，有以下几个结论</span><br><span class="line">	(1)虚函数表里有4个连续的函数地址(复制总数 = 继承父类的函数 + 自己的函数 - 重复的函数 = 4)</span><br><span class="line">	(2)与父类重复的函数不复制父类函数，直接使用自己的函数，不重复的复制父类的函数</span><br><span class="line">	(3)函数的地址顺序先继承父类，再继承子类</span><br></pre></td></tr></table></figure>



<p>实现代码如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1、单继承无函数覆盖(打印Sub对象的虚函数表)</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Base</span>				</span></span><br><span class="line"><span class="class">&#123;</span>				</span><br><span class="line"><span class="keyword">public</span>:				</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Function_1</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base:Function_1...\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Function_2</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base:Function_2...\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Function_3</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base:Function_3...\n\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">&#125;;				</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Sub</span>:</span>Base				</span><br><span class="line">&#123;				</span><br><span class="line"><span class="keyword">public</span>:				</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Function_4</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Sub:Function_4...\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Function_5</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Sub:Function_5...\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Function_6</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Sub:Function_6...\n\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">&#125;;		</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//2、单继承有函数覆盖(打印Sub对象的虚函数表)</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Base1</span>				</span></span><br><span class="line"><span class="class">&#123;</span>				</span><br><span class="line"><span class="keyword">public</span>:				</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Function_1</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base:Function_1...\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Function_2</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base:Function_2...\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Function_3</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base:Function_3...\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">&#125;;				</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Sub1</span>:</span>Base1				</span><br><span class="line">&#123;				</span><br><span class="line"><span class="keyword">public</span>:				</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Function_1</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Sub:Function_1...\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Function_2</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Sub:Function_2...\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Function_6</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Sub:Function_6...\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">&#125;;				</span><br><span class="line">		</span><br><span class="line"><span class="comment">//打印base的虚函数表</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrintBaseVT</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;					</span><br><span class="line">					</span><br><span class="line">    Base base;		</span><br><span class="line">	<span class="keyword">int</span> baseVTaddress = *(<span class="keyword">int</span>*)&amp;base;	<span class="comment">//base的虚表地址</span></span><br><span class="line">	</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***************打印Base对象的虚函数表***************\n\n&quot;</span>);</span><br><span class="line">				</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***************base 的虚函数表地址为:%x***************\n\n&quot;</span>,baseVTaddress);				</span><br><span class="line">					</span><br><span class="line">					</span><br><span class="line">    <span class="function"><span class="keyword">typedef</span> <span class="title">void</span><span class="params">(*pFunction)</span><span class="params">(<span class="keyword">void</span>)</span></span>;					</span><br><span class="line">					</span><br><span class="line">	pFunction pFn;				</span><br><span class="line">					</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++)				</span><br><span class="line">	&#123;				</span><br><span class="line">		<span class="keyword">int</span> temp = *((<span class="keyword">int</span>*)(*(<span class="keyword">int</span>*)&amp;base)+i);			</span><br><span class="line">		pFn = (pFunction)temp;			</span><br><span class="line">		<span class="built_in">pFn</span>();			</span><br><span class="line">	&#125;				</span><br><span class="line">									</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//单继承无函数覆盖(打印sub对象的虚函数表)</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrintSubVT1</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Sub sub;</span><br><span class="line">	<span class="keyword">int</span> subVTaddress = *(<span class="keyword">int</span>*)&amp;sub;	<span class="comment">//sub虚表地址</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***************单继承无函数覆盖(打印Sub对象的虚函数表)***************\n\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***************sub 的虚函数表地址为:%x***************\n\n&quot;</span>,subVTaddress);</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">typedef</span> <span class="title">void</span><span class="params">(*pFunction)</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	pFunction pFn;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; <span class="number">6</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> temp = *((<span class="keyword">int</span>*)(*(<span class="keyword">int</span>*)&amp;sub)+i);</span><br><span class="line">		pFn = (pFunction)temp;</span><br><span class="line">		<span class="built_in">pFn</span>();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//单继承有函数覆盖(打印sub对象的虚函数表)</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrintSubVT2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Base base;</span><br><span class="line">	Sub1 sub1;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> baseVTaddress = *(<span class="keyword">int</span>*)&amp;base;	<span class="comment">//base虚表地址</span></span><br><span class="line">	<span class="keyword">int</span> subVTaddress = *(<span class="keyword">int</span>*)&amp;sub1;	<span class="comment">//sub虚表地址</span></span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">		</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***************单继承有函数覆盖(打印Sub对象的虚函数表)***************\n\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***************sub1 的虚函数表地址为:%x***************\n\n&quot;</span>,subVTaddress);</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">typedef</span> <span class="title">void</span><span class="params">(*pFunction)</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	pFunction pFn;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; <span class="number">4</span> ; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> temp = *((<span class="keyword">int</span>*)(*(<span class="keyword">int</span>*)&amp;sub1)+i);</span><br><span class="line">		pFn = (pFunction)temp;</span><br><span class="line">		<span class="built_in">pFn</span>();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">PrintBaseVT</span>();</span><br><span class="line">	<span class="built_in">PrintSubVT1</span>();</span><br><span class="line">	<span class="built_in">PrintSubVT2</span>();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>实现结果如下：</p>
<p><img src="/images/C/image-20210609113951029.png" alt="image-20210609113951029"></p>
<h1 id="动态绑定-多态"><a href="#动态绑定-多态" class="headerlink" title="动态绑定 多态"></a>动态绑定 多态</h1><h2 id="继承总结"><a href="#继承总结" class="headerlink" title="继承总结"></a>继承总结</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.与父类重复的函数不复制父类函数，直接使用自己的函数，不重复的复制父类的函数</span><br><span class="line">2.函数的地址顺序先继承父类，再继承子类</span><br></pre></td></tr></table></figure>



<h3 id="单继承无函数覆盖"><a href="#单继承无函数覆盖" class="headerlink" title="单继承无函数覆盖"></a>单继承无函数覆盖</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1、单继承无函数覆盖(打印Sub对象的虚函数表)</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Base</span>				</span></span><br><span class="line"><span class="class">&#123;</span>				</span><br><span class="line"><span class="keyword">public</span>:				</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Function_1</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base:Function_1...\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Function_2</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base:Function_2...\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Function_3</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base:Function_3...\n\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">&#125;;				</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Sub</span>:</span>Base				</span><br><span class="line">&#123;				</span><br><span class="line"><span class="keyword">public</span>:				</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Function_4</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Sub:Function_4...\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Function_5</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Sub:Function_5...\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Function_6</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Sub:Function_6...\n\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">&#125;;	</span><br><span class="line"></span><br><span class="line"><span class="comment">//单继承无函数覆盖(打印sub对象的虚函数表)</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrintSubVT1</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Sub sub;</span><br><span class="line">	<span class="keyword">int</span> subVTaddress = *(<span class="keyword">int</span>*)&amp;sub;	<span class="comment">//sub虚表地址</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***************单继承无函数覆盖(打印Sub对象的虚函数表)***************\n\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***************sub 的虚函数表地址为:%x***************\n\n&quot;</span>,subVTaddress);</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">typedef</span> <span class="title">void</span><span class="params">(*pFunction)</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	pFunction pFn;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; <span class="number">6</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> temp = *((<span class="keyword">int</span>*)(*(<span class="keyword">int</span>*)&amp;sub)+i);</span><br><span class="line">		pFn = (pFunction)temp;</span><br><span class="line">		<span class="built_in">pFn</span>();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><img src="/images/C/image-20210609174045934.png" alt="image-20210609174045934"></p>
<p><img src="/images/C/image-20210609161428609.png" alt="image-20210609161428609"></p>
<h3 id="单继承有函数覆盖"><a href="#单继承有函数覆盖" class="headerlink" title="单继承有函数覆盖"></a>单继承有函数覆盖</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//2、单继承有函数覆盖(打印Sub对象的虚函数表)</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Base1</span>				</span></span><br><span class="line"><span class="class">&#123;</span>				</span><br><span class="line"><span class="keyword">public</span>:				</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Function_1</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base:Function_1...\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Function_2</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base:Function_2...\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Function_3</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base:Function_3...\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">&#125;;				</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Sub1</span>:</span>Base1				</span><br><span class="line">&#123;				</span><br><span class="line"><span class="keyword">public</span>:				</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Function_1</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Sub:Function_1...\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Function_2</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Sub:Function_2...\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Function_6</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Sub:Function_6...\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//单继承有函数覆盖(打印sub对象的虚函数表)</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrintSubVT2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Base base;</span><br><span class="line">	Sub1 sub1;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> baseVTaddress = *(<span class="keyword">int</span>*)&amp;base;	<span class="comment">//base虚表地址</span></span><br><span class="line">	<span class="keyword">int</span> subVTaddress = *(<span class="keyword">int</span>*)&amp;sub1;	<span class="comment">//sub虚表地址</span></span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">		</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***************单继承有函数覆盖(打印Sub对象的虚函数表)***************\n\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***************sub1 的虚函数表地址为:%x***************\n\n&quot;</span>,subVTaddress);</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">typedef</span> <span class="title">void</span><span class="params">(*pFunction)</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	pFunction pFn;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; <span class="number">4</span> ; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> temp = *((<span class="keyword">int</span>*)(*(<span class="keyword">int</span>*)&amp;sub1)+i);</span><br><span class="line">		pFn = (pFunction)temp;</span><br><span class="line">		<span class="built_in">pFn</span>();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><img src="/images/C/image-20210609174113045.png" alt="image-20210609174113045"></p>
<p><img src="/images/C/image-20210609161731230.png" alt="image-20210609161731230"></p>
<h3 id="多继承无函数覆盖"><a href="#多继承无函数覆盖" class="headerlink" title="多继承无函数覆盖"></a>多继承无函数覆盖</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//3、多继承无函数覆盖</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Base2</span>				</span></span><br><span class="line"><span class="class">&#123;</span>				</span><br><span class="line"><span class="keyword">public</span>:				</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fn_1</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base2:Fn_1...\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fn_2</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base2:Fn_2...\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">&#125;;				</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Base3</span>				</span></span><br><span class="line"><span class="class">&#123;</span>				</span><br><span class="line"><span class="keyword">public</span>:				</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fn_3</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base3:Fn_3...\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fn_4</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base3:Fn_4...\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">&#125;;				</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Sub2</span>:</span>Base2,Base3				</span><br><span class="line">&#123;				</span><br><span class="line"><span class="keyword">public</span>:				</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fn_5</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Sub:Fn_5...\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fn_6</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Sub:Fn_6...\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">&#125;;				</span><br><span class="line"></span><br><span class="line"><span class="comment">//多继承无函数覆盖</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrintSubVT3</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	&#123;												</span><br><span class="line">    Sub2 sub2;	</span><br><span class="line">	<span class="keyword">int</span> subVTaddress = *(<span class="keyword">int</span>*)&amp;sub2;</span><br><span class="line">	<span class="keyword">int</span> subVTaddress2 = *(<span class="keyword">int</span>*)&amp;sub2 + <span class="number">4</span>;</span><br><span class="line">							</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***************多继承无函数覆盖(打印Sub对象的虚函数表)***************\n\n&quot;</span>);				</span><br><span class="line">    												</span><br><span class="line">							</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***************sub2 的虚函数表地址为:%x***************\n\n&quot;</span>,subVTaddress);	</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">typedef</span> <span class="title">void</span><span class="params">(*pFunction)</span><span class="params">(<span class="keyword">void</span>)</span></span>;	</span><br><span class="line">	</span><br><span class="line">	pFunction pFn;						</span><br><span class="line">							</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++)						</span><br><span class="line">	&#123;						</span><br><span class="line">		<span class="keyword">int</span> temp = *((<span class="keyword">int</span>*)(*(<span class="keyword">int</span>*)&amp;sub2)+i);										</span><br><span class="line">		<span class="keyword">if</span>(temp == <span class="number">0</span>)					</span><br><span class="line">		&#123;					</span><br><span class="line">			<span class="keyword">break</span>;				</span><br><span class="line">		&#125;					</span><br><span class="line">		pFn = (pFunction)temp;					</span><br><span class="line">		<span class="built_in">pFn</span>();					</span><br><span class="line">	&#125;						</span><br><span class="line">							</span><br><span class="line">	<span class="comment">//对象的第二个四字节是Base2的虚表						</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***************sub2 的虚函数表地址为:%x***************\n\n&quot;</span>,subVTaddress2);						</span><br><span class="line">							</span><br><span class="line">	pFunction pFn1;						</span><br><span class="line">							</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span> ; k &lt; <span class="number">2</span> ; k++)						</span><br><span class="line">	&#123;			 			</span><br><span class="line">		<span class="keyword">int</span> temp = *((<span class="keyword">int</span>*)(*(<span class="keyword">int</span>*)((<span class="keyword">int</span>)&amp;sub2+<span class="number">4</span>))+k);									</span><br><span class="line">		pFn1 = (pFunction)temp;					</span><br><span class="line">		<span class="built_in">pFn1</span>();					</span><br><span class="line">	&#125;						</span><br><span class="line">												</span><br><span class="line">	&#125;							</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>这里注意一下在打印的时候使用了两个循环，进入反汇编把sub2拖进去，发现这里指向了两个地址</p>
<p><img src="/images/C/image-20210609163511707.png" alt="image-20210609163511707"></p>
<p>进入地址查看发现这两个地址都分别对应了一个虚函数表</p>
<p><img src="/images/C/image-20210609163611639.png" alt="image-20210609163611639"></p>
<p><img src="/images/C/image-20210609163642893.png" alt="image-20210609163642893"></p>
<p>这里运行一下，发现子类的虚函数表位于第一个结构体的虚函数表里面，第二个结构体单独有一个虚函数表</p>
<p><img src="/images/C/image-20210609163748465.png" alt="image-20210609163748465"></p>
<p>结构如下：</p>
<p><img src="/images/C/image-20210609163841925.png" alt="image-20210609163841925"></p>
<h3 id="多继承有函数覆盖"><a href="#多继承有函数覆盖" class="headerlink" title="多继承有函数覆盖"></a>多继承有函数覆盖</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//4、多继承有函数覆盖</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Base4</span>			</span></span><br><span class="line"><span class="class">&#123;</span>			</span><br><span class="line"><span class="keyword">public</span>:			</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fn_1</span><span class="params">()</span>			</span></span><br><span class="line"><span class="function">    </span>&#123;			</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base4:Fn_1...\n&quot;</span>);			</span><br><span class="line">    &#125;			</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fn_2</span><span class="params">()</span>			</span></span><br><span class="line"><span class="function">    </span>&#123;			</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base4:Fn_2...\n&quot;</span>);			</span><br><span class="line">    &#125;			</span><br><span class="line">&#125;;			</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Base5</span>			</span></span><br><span class="line"><span class="class">&#123;</span>			</span><br><span class="line"><span class="keyword">public</span>:			</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fn_3</span><span class="params">()</span>			</span></span><br><span class="line"><span class="function">    </span>&#123;			</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base5:Fn_3...\n&quot;</span>);			</span><br><span class="line">    &#125;			</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fn_4</span><span class="params">()</span>			</span></span><br><span class="line"><span class="function">    </span>&#123;			</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base5:Fn_4...\n&quot;</span>);			</span><br><span class="line">    &#125;			</span><br><span class="line">&#125;;			</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Sub3</span>:</span>Base4,Base5			</span><br><span class="line">&#123;			</span><br><span class="line"><span class="keyword">public</span>:			</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fn_1</span><span class="params">()</span>			</span></span><br><span class="line"><span class="function">    </span>&#123;			</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Sub:Fn_1...\n&quot;</span>);			</span><br><span class="line">    &#125;			</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fn_3</span><span class="params">()</span>			</span></span><br><span class="line"><span class="function">    </span>&#123;			</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Sub:Fn_3...\n&quot;</span>);			</span><br><span class="line">    &#125;			</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fn_5</span><span class="params">()</span>		</span></span><br><span class="line"><span class="function">    </span>&#123;			</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Sub:Fn_5...\n&quot;</span>);			</span><br><span class="line">    &#125;			</span><br><span class="line">&#125;;			</span><br><span class="line"></span><br><span class="line"><span class="comment">//多继承有函数覆盖</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrintSubVT4</span><span class="params">()</span>							</span></span><br><span class="line"><span class="function"></span>&#123;							</span><br><span class="line">						</span><br><span class="line">    Sub3 sub3;							</span><br><span class="line">					</span><br><span class="line">    <span class="keyword">int</span> subVTaddress = *(<span class="keyword">int</span>*)&amp;sub3;</span><br><span class="line">	<span class="keyword">int</span> subVTaddress2 = *(<span class="keyword">int</span>*)&amp;sub3 + <span class="number">4</span>;					</span><br><span class="line">							</span><br><span class="line">							</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***************多继承有函数覆盖(打印Sub对象的虚函数表)***************\n\n&quot;</span>);					</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***************sub3 的虚函数表地址为:%x***************\n\n&quot;</span>,subVTaddress);			</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">typedef</span> <span class="title">void</span><span class="params">(*pFunction)</span><span class="params">(<span class="keyword">void</span>)</span></span>;	</span><br><span class="line"></span><br><span class="line">	pFunction pFn;						</span><br><span class="line">							</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i= <span class="number">0</span> ; i &lt; <span class="number">6</span>; i++)						</span><br><span class="line">	&#123;						</span><br><span class="line">		<span class="keyword">int</span> temp = *((<span class="keyword">int</span>*)(*(<span class="keyword">int</span>*)&amp;sub3)+i);					</span><br><span class="line">		<span class="keyword">if</span>(temp == <span class="number">0</span>)					</span><br><span class="line">		&#123;					</span><br><span class="line">			<span class="keyword">break</span>;				</span><br><span class="line">		&#125;					</span><br><span class="line">		pFn = (pFunction)temp;					</span><br><span class="line">		<span class="built_in">pFn</span>();					</span><br><span class="line">	&#125;						</span><br><span class="line">							</span><br><span class="line">	<span class="comment">//对象的第二个四字节是Base2的虚表						</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***************sub3 的虚函数表地址为:%x***************\n\n&quot;</span>,subVTaddress2);					</span><br><span class="line">							</span><br><span class="line">	pFunction pFn1;						</span><br><span class="line">							</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; <span class="number">2</span>; k++)						</span><br><span class="line">	&#123;						</span><br><span class="line">		<span class="keyword">int</span> temp = *((<span class="keyword">int</span>*)(*(<span class="keyword">int</span>*)((<span class="keyword">int</span>)&amp;sub3+<span class="number">4</span>))+k);					</span><br><span class="line">		pFn1 = (pFunction)temp;					</span><br><span class="line">		<span class="built_in">pFn1</span>();					</span><br><span class="line">	&#125;						</span><br><span class="line">												</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>这里<code>Sub3</code>里面的函数为<code>Function1、3、5</code>，继承<code>Base4</code>的<code>Function1、5</code>位于第一个虚表里面，继承<code>Base5</code>的<code>Function4</code>位于第二个虚表里面</p>
<p><img src="/images/C/image-20210609164621314.png" alt="image-20210609164621314"></p>
<p><img src="/images/C/image-20210609164721636.png" alt="image-20210609164721636"></p>
<h3 id="多重继承无函数覆盖"><a href="#多重继承无函数覆盖" class="headerlink" title="多重继承无函数覆盖"></a>多重继承无函数覆盖</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//5、多重继承无函数覆盖</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Base6</span>			</span></span><br><span class="line"><span class="class">&#123;</span>			</span><br><span class="line"><span class="keyword">public</span>:			</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fn_1</span><span class="params">()</span>			</span></span><br><span class="line"><span class="function">    </span>&#123;			</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base1:Fn_1...\n&quot;</span>);			</span><br><span class="line">    &#125;			</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fn_2</span><span class="params">()</span>			</span></span><br><span class="line"><span class="function">    </span>&#123;			</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base1:Fn_2...\n&quot;</span>);			</span><br><span class="line">    &#125;			</span><br><span class="line">&#125;;			</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Base7</span>:</span>Base6			</span><br><span class="line">&#123;			</span><br><span class="line"><span class="keyword">public</span>:			</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fn_3</span><span class="params">()</span>			</span></span><br><span class="line"><span class="function">    </span>&#123;			</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base2:Fn_3...\n&quot;</span>);			</span><br><span class="line">    &#125;			</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fn_4</span><span class="params">()</span>			</span></span><br><span class="line"><span class="function">    </span>&#123;			</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base2:Fn_4...\n&quot;</span>);			</span><br><span class="line">    &#125;			</span><br><span class="line">&#125;;			</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Sub4</span>:</span>Base7			</span><br><span class="line">&#123;			</span><br><span class="line"><span class="keyword">public</span>:			</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fn_5</span><span class="params">()</span>			</span></span><br><span class="line"><span class="function">    </span>&#123;			</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Sub:Fn_5...\n&quot;</span>);			</span><br><span class="line">    &#125;			</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fn_6</span><span class="params">()</span>			</span></span><br><span class="line"><span class="function">    </span>&#123;			</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Sub:Fn_6...\n&quot;</span>);			</span><br><span class="line">    &#125;			</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//多重继承无函数覆盖</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrintSubVT5</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">					</span><br><span class="line">    Sub4 sub4;						</span><br><span class="line">	<span class="keyword">int</span> subVTaddress = *(<span class="keyword">int</span>*)&amp;sub4;					</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***************多重继承无函数覆盖(打印Sub对象的虚函数表)***************\n\n&quot;</span>);	</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***************This size of sub4 is:%x***************\n\n&quot;</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(sub4));</span><br><span class="line">							</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***************sub4 的虚函数表地址为:%x***************\n\n&quot;</span>,subVTaddress);				</span><br><span class="line">    </span><br><span class="line">	<span class="function"><span class="keyword">typedef</span> <span class="title">void</span><span class="params">(*pFunction)</span><span class="params">(<span class="keyword">void</span>)</span></span>;						</span><br><span class="line">											</span><br><span class="line">	pFunction pFn;					</span><br><span class="line">						</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++)					</span><br><span class="line">	&#123;					</span><br><span class="line">		<span class="keyword">int</span> temp = *((<span class="keyword">int</span>*)(*(<span class="keyword">int</span>*)&amp;sub4)+i);				</span><br><span class="line">		<span class="keyword">if</span>(temp == <span class="number">0</span>)				</span><br><span class="line">		&#123;				</span><br><span class="line">			<span class="keyword">break</span>;			</span><br><span class="line">		&#125;				</span><br><span class="line">		pFn = (pFunction)temp;				</span><br><span class="line">		<span class="built_in">pFn</span>();				</span><br><span class="line">	&#125;																</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>这里看一下打印的结果，在输出虚函数表的函数里我加了一行判断<code>sub4</code>大小的语句，可以看到这里<code>sub4</code>的大小是4，那么就可以说明<code>sub4</code>里面只有一个虚函数表，下面打印出来的虚函数也印证了这一观点</p>
<p><img src="/images/C/image-20210609170613885.png" alt="image-20210609170613885"></p>
<p><img src="/images/C/image-20210609170742874.png" alt="image-20210609170742874"></p>
<h3 id="多重继承有函数覆盖"><a href="#多重继承有函数覆盖" class="headerlink" title="多重继承有函数覆盖"></a>多重继承有函数覆盖</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//6、多重继承有函数覆盖</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Base8</span>			</span></span><br><span class="line"><span class="class">&#123;</span>			</span><br><span class="line"><span class="keyword">public</span>:			</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fn_1</span><span class="params">()</span>			</span></span><br><span class="line"><span class="function">    </span>&#123;			</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base8:Fn_1...\n&quot;</span>);			</span><br><span class="line">    &#125;			</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fn_2</span><span class="params">()</span>			</span></span><br><span class="line"><span class="function">    </span>&#123;			</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base8:Fn_2...\n&quot;</span>);			</span><br><span class="line">    &#125;			</span><br><span class="line">&#125;;			</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Base9</span>:</span>Base8			</span><br><span class="line">&#123;			</span><br><span class="line"><span class="keyword">public</span>:			</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fn_1</span><span class="params">()</span>			</span></span><br><span class="line"><span class="function">    </span>&#123;			</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base9:Fn_1...\n&quot;</span>);			</span><br><span class="line">    &#125;			</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fn_3</span><span class="params">()</span>			</span></span><br><span class="line"><span class="function">    </span>&#123;			</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base9:Fn_3...\n&quot;</span>);			</span><br><span class="line">    &#125;			</span><br><span class="line">&#125;;			</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Sub5</span>:</span>Base9			</span><br><span class="line">&#123;			</span><br><span class="line"><span class="keyword">public</span>:			</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fn_5</span><span class="params">()</span>		</span></span><br><span class="line"><span class="function">    </span>&#123;			</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Sub:Fn_5...\n&quot;</span>);			</span><br><span class="line">    &#125;			</span><br><span class="line">&#125;;		</span><br><span class="line"></span><br><span class="line"><span class="comment">//多重继承有函数覆盖</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrintSubVT6</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">					</span><br><span class="line">    Sub5 sub5;						</span><br><span class="line">	<span class="keyword">int</span> subVTaddress = *(<span class="keyword">int</span>*)&amp;sub5;					</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***************多重继承有函数覆盖(打印Sub对象的虚函数表)***************\n\n&quot;</span>);	</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***************This size of sub5 is:%x***************\n\n&quot;</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(sub5));</span><br><span class="line">							</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***************sub5 的虚函数表地址为:%x***************\n\n&quot;</span>,subVTaddress);				</span><br><span class="line">    </span><br><span class="line">	<span class="function"><span class="keyword">typedef</span> <span class="title">void</span><span class="params">(*pFunction)</span><span class="params">(<span class="keyword">void</span>)</span></span>;						</span><br><span class="line">											</span><br><span class="line">	pFunction pFn;					</span><br><span class="line">						</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++)					</span><br><span class="line">	&#123;					</span><br><span class="line">		<span class="keyword">int</span> temp = *((<span class="keyword">int</span>*)(*(<span class="keyword">int</span>*)&amp;sub5)+i);				</span><br><span class="line">		<span class="keyword">if</span>(temp == <span class="number">0</span>)				</span><br><span class="line">		&#123;				</span><br><span class="line">			<span class="keyword">break</span>;			</span><br><span class="line">		&#125;				</span><br><span class="line">		pFn = (pFunction)temp;				</span><br><span class="line">		<span class="built_in">pFn</span>();				</span><br><span class="line">	&#125;																</span><br><span class="line">&#125;				</span><br></pre></td></tr></table></figure>



<p>与父类重复的函数不复制父类函数，直接使用自己的函数，不重复的复制父类的函数</p>
<p><img src="/images/C/image-20210609171940583.png" alt="image-20210609171940583"></p>
<p><img src="/images/C/image-20210609172144923.png" alt="image-20210609172144923"></p>
<h3 id="多重继承有函数覆盖2"><a href="#多重继承有函数覆盖2" class="headerlink" title="多重继承有函数覆盖2"></a>多重继承有函数覆盖2</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//7、多重继承有函数覆盖2</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Base10</span>				</span></span><br><span class="line"><span class="class">&#123;</span>				</span><br><span class="line"><span class="keyword">public</span>:				</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fn_1</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base10:Fn_1...\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fn_2</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base10:Fn_2...\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">&#125;;				</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Base11</span>:</span>Base10				</span><br><span class="line">&#123;				</span><br><span class="line"><span class="keyword">public</span>:				</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fn_1</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base11:Fn_1...\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fn_3</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base11:Fn_3...\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">&#125;;				</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Sub6</span>:</span>Base11				</span><br><span class="line">&#123;				</span><br><span class="line"><span class="keyword">public</span>:				</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fn_1</span><span class="params">()</span>			</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Sub:Fn_1...\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fn_5</span><span class="params">()</span>			</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Sub:Fn_5...\n&quot;</span>);				</span><br><span class="line">    &#125;				</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrintSubVT7</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">					</span><br><span class="line">    Sub6 sub6;						</span><br><span class="line">	<span class="keyword">int</span> subVTaddress = *(<span class="keyword">int</span>*)&amp;sub6;					</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***************多重继承有函数覆盖2(打印Sub对象的虚函数表)***************\n\n&quot;</span>);	</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***************This size of sub6 is:%x***************\n\n&quot;</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(sub6));</span><br><span class="line">							</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***************sub6 的虚函数表地址为:%x***************\n\n&quot;</span>,subVTaddress);				</span><br><span class="line">    </span><br><span class="line">	<span class="function"><span class="keyword">typedef</span> <span class="title">void</span><span class="params">(*pFunction)</span><span class="params">(<span class="keyword">void</span>)</span></span>;						</span><br><span class="line">											</span><br><span class="line">	pFunction pFn;					</span><br><span class="line">						</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++)					</span><br><span class="line">	&#123;					</span><br><span class="line">		<span class="keyword">int</span> temp = *((<span class="keyword">int</span>*)(*(<span class="keyword">int</span>*)&amp;sub6)+i);				</span><br><span class="line">		<span class="keyword">if</span>(temp == <span class="number">0</span>)				</span><br><span class="line">		&#123;				</span><br><span class="line">			<span class="keyword">break</span>;			</span><br><span class="line">		&#125;				</span><br><span class="line">		pFn = (pFunction)temp;				</span><br><span class="line">		<span class="built_in">pFn</span>();				</span><br><span class="line">	&#125;																</span><br><span class="line">&#125;	</span><br></pre></td></tr></table></figure>



<p>与父类重复的函数不复制父类函数，直接使用自己的函数，不重复的复制父类的函数</p>
<p><img src="/images/C/image-20210609172519250.png" alt="image-20210609172519250"></p>
<p><img src="/images/C/image-20210609172634100.png" alt="image-20210609172634100"></p>
<h3 id="多重继承有函数覆盖3"><a href="#多重继承有函数覆盖3" class="headerlink" title="多重继承有函数覆盖3"></a>多重继承有函数覆盖3</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//8、多重继承有函数覆盖3</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Base12</span>			</span></span><br><span class="line"><span class="class">&#123;</span>			</span><br><span class="line"><span class="keyword">public</span>:			</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fn_1</span><span class="params">()</span>			</span></span><br><span class="line"><span class="function">    </span>&#123;			</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base12:Fn_1...\n&quot;</span>);			</span><br><span class="line">    &#125;			</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fn_2</span><span class="params">()</span>			</span></span><br><span class="line"><span class="function">    </span>&#123;			</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base12:Fn_2...\n&quot;</span>);			</span><br><span class="line">    &#125;			</span><br><span class="line">&#125;;			</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Base13</span>:</span>Base12			</span><br><span class="line">&#123;			</span><br><span class="line"><span class="keyword">public</span>:			</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fn_3</span><span class="params">()</span>			</span></span><br><span class="line"><span class="function">    </span>&#123;			</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base13:Fn_3...\n&quot;</span>);			</span><br><span class="line">    &#125;			</span><br><span class="line">&#125;;			</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Sub7</span>:</span>Base13			</span><br><span class="line">&#123;			</span><br><span class="line"><span class="keyword">public</span>:			</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fn_1</span><span class="params">()</span>		</span></span><br><span class="line"><span class="function">    </span>&#123;			</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Sub7:Fn_1...\n&quot;</span>);			</span><br><span class="line">    &#125;			</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fn_3</span><span class="params">()</span>		</span></span><br><span class="line"><span class="function">    </span>&#123;			</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Sub7:Fn_3...\n&quot;</span>);			</span><br><span class="line">    &#125;			</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//多重继承有函数覆盖3</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrintSubVT8</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">					</span><br><span class="line">    Sub7 sub7;						</span><br><span class="line">	<span class="keyword">int</span> subVTaddress = *(<span class="keyword">int</span>*)&amp;sub7;					</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***************多重继承有函数覆盖3(打印Sub对象的虚函数表)***************\n\n&quot;</span>);	</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***************This size of sub7 is:%x***************\n\n&quot;</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(sub7));</span><br><span class="line">							</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;***************sub7 的虚函数表地址为:%x***************\n\n&quot;</span>,subVTaddress);				</span><br><span class="line">    </span><br><span class="line">	<span class="function"><span class="keyword">typedef</span> <span class="title">void</span><span class="params">(*pFunction)</span><span class="params">(<span class="keyword">void</span>)</span></span>;						</span><br><span class="line">											</span><br><span class="line">	pFunction pFn;					</span><br><span class="line">						</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++)					</span><br><span class="line">	&#123;					</span><br><span class="line">		<span class="keyword">int</span> temp = *((<span class="keyword">int</span>*)(*(<span class="keyword">int</span>*)&amp;sub7)+i);				</span><br><span class="line">		<span class="keyword">if</span>(temp == <span class="number">0</span>)				</span><br><span class="line">		&#123;				</span><br><span class="line">			<span class="keyword">break</span>;			</span><br><span class="line">		&#125;				</span><br><span class="line">		pFn = (pFunction)temp;				</span><br><span class="line">		<span class="built_in">pFn</span>();				</span><br><span class="line">	&#125;																</span><br><span class="line">&#125;	</span><br></pre></td></tr></table></figure>



<p>与父类重复的函数不复制父类函数，直接使用自己的函数，不重复的复制父类的函数</p>
<p><img src="/images/C/image-20210609173004516.png" alt="image-20210609173004516"></p>
<p><img src="/images/C/image-20210609173011572.png" alt="image-20210609173011572"></p>
<h2 id="前期绑定和动态绑定-amp-多态"><a href="#前期绑定和动态绑定-amp-多态" class="headerlink" title="前期绑定和动态绑定&amp;多态"></a>前期绑定和动态绑定&amp;多态</h2><p>前期绑定即编译期绑定：在函数编译过后的地址就能够确定</p>
<p>动态绑定即运行期绑定（晚绑定）：在调用的时候才能够确定函数地址</p>
<p>可以看到这里<code>int n = pb-&gt;x</code>这里的地址是能够确定的，所以为前期绑定</p>
<p><img src="/images/C/image-20210609190137320.png" alt="image-20210609190137320"></p>
<p>这里<code>function1</code>这个函数也是调用了<code>Base</code>类的<code>function1</code>的地址，地址已经绑定完，所以也为前期绑定。注意一下这里<code>Base</code>类的<code>function1</code>不为虚函数</p>
<p><img src="/images/C/image-20210609190518265.png" alt="image-20210609190518265"></p>
<p><img src="/images/C/image-20210609190440775.png" alt="image-20210609190440775"></p>
<p>这里<code>function2</code>这个函数调用的是<code>edx</code>地址里存的虚表，这里使用<code>virtual</code>函数使用<code>FF call</code>的原因是因为<code>edx</code>里面的值可能被子类重写</p>
<p><img src="/images/C/image-20210609190758887.png" alt="image-20210609190758887"></p>
<h3 id="动态绑定探究"><a href="#动态绑定探究" class="headerlink" title="动态绑定探究"></a>动态绑定探究</h3><p>这里生成两个<code>class</code>，分别为<code>Base</code>和<code>Sub</code></p>
<p><img src="/images/C/image-20210609191523303.png" alt="image-20210609191523303"></p>
<p>这里传入指针指向函数的虚表</p>
<p><img src="/images/C/image-20210609191634571.png" alt="image-20210609191634571"></p>
<p>输出结果如下</p>
<p><img src="/images/C/image-20210609191436409.png" alt="image-20210609191436409"></p>
<p>改为<code>Sub</code>类传入指针</p>
<p><img src="/images/C/image-20210609191742684.png" alt="image-20210609191742684"></p>
<p>输出如下所示</p>
<p><img src="/images/C/image-20210609191712899.png" alt="image-20210609191712899"></p>
<p>这里就可以总结为以下几点：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、只有<span class="keyword">virtual</span>的函数是动态绑定			</span><br><span class="line">			</span><br><span class="line"><span class="number">2</span>、动态绑定还有一个名字：多态</span><br><span class="line">    </span><br><span class="line"><span class="number">3</span>、多态通俗的来说就是同一函数结构体现出了不同的行为</span><br><span class="line">    </span><br><span class="line"><span class="number">4</span>、C++动态绑定是通过虚表实现的</span><br></pre></td></tr></table></figure>



<h3 id="多态探究"><a href="#多态探究" class="headerlink" title="多态探究"></a>多态探究</h3><p>这里在不适用<code>virtual </code>的情况下只会调用父类的<code>printf()</code>函数，这样就没有显示出多态</p>
<p><img src="/images/C/image-20210609194004214.png" alt="image-20210609194004214"></p>
<p>加上<code>virtual</code>之后就能够显示出多态的特性</p>
<p><img src="/images/C/image-20210609194122417.png" alt="image-20210609194122417"></p>
<p>完整代码如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span>				</span></span><br><span class="line"><span class="class">&#123;</span>				</span><br><span class="line"><span class="keyword">public</span>:				</span><br><span class="line">	<span class="keyword">int</span> x;</span><br><span class="line">	<span class="keyword">int</span> y;</span><br><span class="line"><span class="keyword">public</span>:				</span><br><span class="line">	<span class="built_in">Base</span>()			</span><br><span class="line">	&#123;			</span><br><span class="line">		x = <span class="number">1</span>;</span><br><span class="line">		y = <span class="number">2</span>;</span><br><span class="line">	&#125;			</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Print</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Base:%x %x\n&quot;</span>,x,y);				</span><br><span class="line">    &#125;				</span><br><span class="line">				</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sub</span>:</span><span class="keyword">public</span> Base				</span><br><span class="line">&#123;				</span><br><span class="line"><span class="keyword">public</span>:				</span><br><span class="line">	<span class="keyword">int</span> z;			</span><br><span class="line"><span class="keyword">public</span>:				</span><br><span class="line">	<span class="built_in">Sub</span>()			</span><br><span class="line">	&#123;			</span><br><span class="line">		x = <span class="number">4</span>;</span><br><span class="line">		y = <span class="number">5</span>;</span><br><span class="line">		z = <span class="number">6</span>;</span><br><span class="line">	&#125;			</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Print</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Sub:%x %x %x\n&quot;</span>,x,y,z);				</span><br><span class="line">    &#125;				</span><br><span class="line">				</span><br><span class="line">&#125;;				</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sub1</span>:</span><span class="keyword">public</span> Base				</span><br><span class="line">&#123;				</span><br><span class="line"><span class="keyword">public</span>:				</span><br><span class="line">	<span class="keyword">int</span> a;			</span><br><span class="line"><span class="keyword">public</span>:				</span><br><span class="line">	<span class="built_in">Sub1</span>()			</span><br><span class="line">	&#123;			</span><br><span class="line">		x = <span class="number">7</span>;</span><br><span class="line">		y = <span class="number">8</span>;</span><br><span class="line">		a = <span class="number">9</span>;</span><br><span class="line">	&#125;			</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Print</span><span class="params">()</span>				</span></span><br><span class="line"><span class="function">    </span>&#123;				</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Sub1:%x %x %x\n&quot;</span>,x,y,a);				</span><br><span class="line">    &#125;				</span><br><span class="line">				</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TestBound</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Base b;</span><br><span class="line">	Sub s;</span><br><span class="line">	Sub1 s1;</span><br><span class="line"></span><br><span class="line">	Base* arr[] = &#123;&amp;b,&amp;s,&amp;s1&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; <span class="number">3</span> ; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		arr[i] -&gt;<span class="built_in">Print</span>();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">				</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span>				</span></span><br><span class="line"><span class="function"></span>&#123;				</span><br><span class="line">	<span class="built_in">TestBound</span>();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;			</span><br><span class="line">&#125;				</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>总结：</p>
<p>这里分析代码可以发现，这里首先定义了一个<code>Base* arr[]</code>的数组指针指向<code>Base</code>、<code>Sub</code>、<code>Sub1</code>这三个类的地址，通过一个<code>for</code>循环去调用这几个类里面的<code>Print()</code>方法来打印类里面定义的数字。</p>
<p>只有能产生虚表才能拥有多态，因为多态是建立在虚表的基础上的。如果一个父类指针想要访问子类指针只能通过多态的方式进行访问。</p>
<h3 id="析构函数写成virtual的原因"><a href="#析构函数写成virtual的原因" class="headerlink" title="析构函数写成virtual的原因"></a>析构函数写成virtual的原因</h3><p>如果不写成<code>virtual</code>，在使用析构函数释放内存的时候，释放的是父类的内存。</p>
<h1 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h1><h2 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h2><p>因为这里数组的下标是从0开始，如果k的长度直接写<code>length</code>的话会产生越界的情况出现，所以这里循环条件是<code>k &lt; length - 1</code>；我们知道冒泡排序是把最大的数放到数组的最后面，那么在我们把一个最大的数放到数组最后时，只需要比较剩下几个数的大小即可，所以这里内层函数写<code>i &lt; length - 1 - k</code>。</p>
<p>实现代码如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sort</span><span class="params">(<span class="keyword">int</span>* arr,<span class="keyword">int</span> length)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span> ; k &lt; length - <span class="number">1</span> ; k++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; length - <span class="number">1</span> - k; i++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(arr[i] &gt; arr[i+<span class="number">1</span>])</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">int</span> temp = arr[i];</span><br><span class="line">				arr[i] = arr[i+<span class="number">1</span>];</span><br><span class="line">				arr[i+<span class="number">1</span>] = temp;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> arr[] = &#123;<span class="number">2</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">3</span>&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">sort</span>(arr,<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;The number of arr is:%d\n&quot;</span>,arr[i]);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="折半查找"><a href="#折半查找" class="headerlink" title="折半查找"></a>折半查找</h2><p>注意折半查找只能使用在已经排好序的数组里</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Find</span><span class="params">(<span class="keyword">int</span>* arr,<span class="keyword">int</span> nLength,<span class="keyword">int</span> nElement)</span>						</span></span><br><span class="line"><span class="function"></span>&#123;						</span><br><span class="line">	<span class="keyword">int</span> nBegin = <span class="number">0</span>,nEnd = nLength<span class="number">-1</span>,nIndex;					</span><br><span class="line">	<span class="keyword">while</span>(nBegin&lt;=nEnd)					</span><br><span class="line">	&#123;					</span><br><span class="line">		nIndex = (nBegin+nEnd)/<span class="number">2</span>;<span class="comment">//(nBegin+nEnd)&gt;&gt;1	右移一位，使用位运算		</span></span><br><span class="line">		<span class="keyword">if</span>(nElement &gt; arr[nIndex])				</span><br><span class="line">		&#123;				</span><br><span class="line">			nBegin = nIndex+<span class="number">1</span>;			</span><br><span class="line">		&#125;				</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(nElement &lt; arr[nIndex])				</span><br><span class="line">		&#123;				</span><br><span class="line">			nEnd = nIndex<span class="number">-1</span>;			</span><br><span class="line">		&#125;				</span><br><span class="line">		<span class="keyword">else</span>				</span><br><span class="line">		&#123;				</span><br><span class="line">			<span class="keyword">return</span> nIndex;			</span><br><span class="line">		&#125;				</span><br><span class="line">	&#125;					</span><br><span class="line">	<span class="keyword">return</span> <span class="number">-1</span>;					</span><br><span class="line">&#125;		</span><br></pre></td></tr></table></figure>



<h2 id="模板-1"><a href="#模板-1" class="headerlink" title="模板"></a>模板</h2><p>在函数中使用<code>template&lt;class T&gt;</code>即为模板，这里的T可以为任何字母。注意模板需要替换的只是可能要改变数据类型的变量，<code>length</code>的数据类型一定是<code>int</code>，所以可以不使用模板</p>
<p><img src="/images/C/image-20210610111335687.png" alt="image-20210610111335687"></p>
<h1 id="引用-友元-运算符重载"><a href="#引用-友元-运算符重载" class="headerlink" title="引用 友元 运算符重载"></a>引用 友元 运算符重载</h1><p>先看一个程序</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	x = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a = <span class="number">2</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">test</span>(a);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;The value is : %x&quot;</span>,a);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>这里输出的值应该为2，这里进入反汇编论证，可以看到这里把2传入<code>ebp-4</code>当作参数存储，在调用<code>test(a)</code>的时候将<code>ebp-4</code>的值传入<code>eax</code>，再把<code>eax</code>压入堆栈，在使用<code>call</code>调用函数，所以这里只使用了2这个参数进行操作，所以输出的值应该为2</p>
<p><img src="/images/C/image-20210611162720678.png" alt="image-20210611162720678"></p>
<p>这里修改代码之后如下所示</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">(<span class="keyword">int</span>* x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	*x = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a = <span class="number">2</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">test</span>(&amp;a);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;The value is : %x&quot;</span>,a);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>进入到反汇编查看这里已经变为了取<code>[ebp - 4]</code>这个地址，这里再跟进<code>call</code>函数进行查看</p>
<p><img src="/images/C/image-20210611163242411.png" alt="image-20210611163242411"></p>
<p>可以看到<code>call</code>这个函数主要实现了两个功能，一是把<code>ebp + 8</code>的地址传入eax，再把1传入<code>eax</code>所在的地址。所以这个地方输出的值应该为1</p>
<p><img src="/images/C/image-20210611163427718.png" alt="image-20210611163427718"></p>
<h2 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h2><p>我们可以看到<code>test()</code>这个函数传入的是<code>int*</code>这个类型，那么这也出现了一个问题，如果这样定义的话就可能出现给指针乱赋值的情况</p>
<p><img src="/images/C/image-20210611171752250.png" alt="image-20210611171752250"></p>
<p>这里直接传入<code>int&amp;</code>指针的话就不用担心指针的值再被修改</p>
<p><img src="/images/C/image-20210611172143169.png" alt="image-20210611172143169"></p>
<p>这里分别进入指针参数传递和引用参数传递的反汇编进行查看，可以发现在反汇编层面这两种传参方式都是相同的</p>
<p><img src="/images/C/image-20210611172309211.png" alt="image-20210611172309211"></p>
<p>所以在c++中<code>test()</code>函数里既有可能是<code>int</code>类型的参数，也有可能是<code>int&amp;</code>类型的引用</p>
<p><img src="/images/C/image-20210611172532488.png" alt="image-20210611172532488"></p>
<p>对于引用的总结</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、引用类型是C++里面的类型								</span><br><span class="line">								</span><br><span class="line"><span class="number">2</span>、引用类型只能赋值一次，不能重新赋值								</span><br><span class="line">								</span><br><span class="line"><span class="number">3</span>、引用只是变量的一个别名								</span><br><span class="line">								</span><br><span class="line"><span class="number">4</span>、引用可以理解成是编译器维护的一个指针，但并不占用空间								</span><br><span class="line">								</span><br><span class="line"><span class="number">5</span>、使用引用可以像指针那样去访问、修改对象的内容，但更加安全							</span><br></pre></td></tr></table></figure>



<h2 id="指针和引用的区别"><a href="#指针和引用的区别" class="headerlink" title="指针和引用的区别"></a>指针和引用的区别</h2><p><strong>初始化阶段</strong></p>
<p><img src="/images/C/image-20210611213705929.png" alt="image-20210611213705929"></p>
<p>在初始化阶段指针和引用的行为都是一样的，先将x的地址加载到寄存器中，然后将寄存器的值存到内存里。</p>
<p><strong>赋值</strong></p>
<p><img src="/images/C/image-20210611221844925.png" alt="image-20210611221844925"></p>
<p>指针方面：内存中的值存入edx，edx+4(对应32位下int的size)，edx重新写入内存。</p>
<p>引用方面：内存中的值存入eax，找到eax值对应的内存单元中的数字存入ecx，ecx+1，把内存中的值存入edx，ecx的值写入edx所在的地址。</p>
<p>通过对二者赋值，可以发现，<strong>引用变量addr的确有自己的地址，它在内存中是占空间的。</strong>并且指针变量addr完全具有“主导权”，对指针变量px进行赋值，改变的就是它本身；而引用变量addr则完全没有“主导权”，对引用变量addr进行赋值，改变的并不是它本身，而是通过它所找到的x。</p>
<p><strong>取地址</strong></p>
<p><img src="/images/C/image-20210611223519161.png" alt="image-20210611223519161"></p>
<p>指针方面：lea取<code>ebp-8</code>的地址存入eax，再把eax的值存入<code>ebp-10h</code>这个内存地址，相当于把<code>ebp-8</code>的这个地址存入了<code>ebp-10h</code></p>
<p>引用方面：取<code>ebp-0ch</code>的值放入ecx，再把ecx的值存入<code>ebp-14h</code>这个内存地址，相当于把<code>ebp-0ch</code>这个地址的值存入了<code>ebp-14h</code></p>
<p>由此可以发现，<strong>对指针取地址，取出的就是指针变量的地址，而对引用取地址，取出的实际上是引用变量所在内存单元中的值，也就是它引用的变量的地址</strong>。</p>
<p><strong>总结</strong></p>
<p>1.引用和指针都是占用内存的。引用变量和指针变量各自的内存单元中，存放的都是它们引用或指向的变量的地址；</p>
<p>2.引用实际上是把引用变量本身给隐藏了，表面上对引用变量进行赋值，实际上改变的是它引用的变量的值；表面上是对引用变量取地址，实际上取出来的是它引用的变量的地址；</p>
<p>3.由于引用变量的操作的实际对象都是引用变量所在内存单元中的值，因此引用变量必须和另一个变量关联起来。也就是说，引用必须初始化。原因很简单，如果你不对一个引用进行初始化，那么引用变量的内存单元中存放的都是垃圾数据，后面对引用变量进行操作时就会通过这些垃圾数据找到对应的内存地址，这是非常危险的；</p>
<pre><code> 那么直接初始化的时候对引用赋一个常量值呢？这实际上也是不对的，因为引用的初始化实际是用用来初始化的变量的地址来初始化引用变量它自己的内存单元，而一个常量值哪有地址呢？虽然在C++11中已经可以用一个常量来初始化右值引用，但是通过反汇编可以看到，右值引用的根本，还是先用一个地址去保存这个常量值，然后再用这个地址去初始化引用变量。

 而指针变量则完全不一样了，指针变量的操作的实际对象都是它自己，因此指针变量不像引用那样必须初始化，但是为了安全，也应该初始化。
</code></pre>
<p>4.依然是由于引用变量的一切操作实际对象都是它引用的变量，因此从用户角度来说是没有入口让用户去修改引用变量本身的。换句话说，用户层面没有任何办法去改变引用变量内存单元中存放的地址，这也就是为什么引用一旦初始化后就无法再修改。</p>
<p>5.由于引用变量自身对于用户是不可见的，对引用变量取地址得到的也不是引用变量的地址，因此你无法让一个引用变量的内存中存放另一个引用变量的地址，换句话说，不存在引用的引用。而相反，由于指针变量取出来的地址就是它本身的地址，因此你完全可以把一个指针变量的地址存放在另一个指针变量的内存中，这也就是为什么可以存在多级指针，但是多级引用是不允许的。</p>
<p>6.关于“引用是变量的别名”的考虑。感觉这句话既对也不对，说它不对是因为引用变量和引用的变量二者实际上是独立的两块内存单元，只不过前者依托后者而存在，但是这并不能说前者就是后者的别名，这是矛盾的；说它对，是因为对引用变量进行操作时，改变的对象实际上都是引用的变量而不是引用变量，这就感觉引用变量只是一层伪装，真正的还是它引用的变量，从这个角度来说，引用确实可以说是变量的别名。</p>
<p>7.函数传指针与传引用的区别。函数传指针的原型类似于<code>int add(int * a, int * b)</code>;这类函数的形参是指针，调用方式为<code>int x = 1, y = 2; add(&amp;x,&amp;y)；</code>那么传入的实参则是变量的地址，因此在函数内部，是用地址型实参&amp;x和&amp;y来初始化形参a和b，相当于<code>int *a = &amp;x，int * b = &amp;y</code>的；因此形参a和b内存单元中存放的是x和y的地址。</p>
<pre><code>  而对于函数传引用，函数原型则类似于int add(int &amp; a,int &amp; b)，这类函数的形参是引用，调用方式为int x = 1, y = 2; add(x,y)；传入的实参就是x和y变量自身，在函数内部，则是用x和y来初始化a和b，相当于int &amp;a = x，int &amp;b = y，因此，形参a和b内存单元中存放的也是x和y的地址，不过它毕竟是引用，如前面所说，当你试图对形参a或b的值进行改变的时候，改变的不是它内存中存放的&amp;x和&amp;y，其实是x或y；当你对形参a或b取地址时，取出来的并不是形参本身的地址，而是它内存中存放的&amp;x和&amp;y。

  而再说一个与本文无关的函数传值，如int add(int a,int b)；这类函数的形参只是普通的int型变量，当调用add(x,y)时，在函数内部实际上就是用x和y来初始化a和b，相当于int a = x，int b = y，所以形参和实参实际上只是值相同而已，改变形参并不会影响实参。
</code></pre>
<h2 id="友元函数"><a href="#友元函数" class="headerlink" title="友元函数"></a>友元函数</h2><p><code>const</code>关键字定义为只读，当指针指向函数时不能修改</p>
<p>因为这里为<code>private</code>成员，所以不能够访问到父类的x、y成员</p>
<p><img src="/images/C/image-20210611195552995.png" alt="image-20210611195552995"></p>
<p>使用友元函数进行声明</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">friend</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">const</span> Person&amp; refPer)</span></span>;	<span class="comment">//声明友元函数</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">const</span> Person&amp; p)</span>	   <span class="comment">//定义函数</span></span></span><br></pre></td></tr></table></figure>



<p><img src="/images/C/image-20210611195916888.png" alt="image-20210611195916888"></p>
<p>友元函数总结：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">什么情况下需要友元函数：				</span><br><span class="line">				</span><br><span class="line">(1) 运算符重载的某些场合需要使用友元				</span><br><span class="line">				</span><br><span class="line">(2) 两个类要共享数据的时候				</span><br><span class="line">				</span><br><span class="line">友元函数和类的成员函数的区别：		</span><br><span class="line">				</span><br><span class="line">(1) 成员函数有this指针，而友元函数没有this指针				</span><br><span class="line">				</span><br><span class="line">(2) 友元函数是不能被继承的，就像父亲的朋友未必是儿子的朋友				</span><br></pre></td></tr></table></figure>





<h2 id="运算符重载"><a href="#运算符重载" class="headerlink" title="运算符重载"></a>运算符重载</h2><p>首先这里要了解为什么C++要进行运算符重载</p>
<p>C++ 预定义的运算符，只能用于基本数据类型的运算：整型、实型、字符型、逻辑型等等，且不能用于对象的运算。但是我们有时候又很需要在对象之间能用运算符，那么这时我们就要<strong>重载运算符</strong>，使得运算符能用于对象之间的运算。</p>
<p>比如，在数学上，两个复数可以直接进行+、-等运算，但在C++中，直接将+或-用于复数对象是不允许的。有时会希望，让对象也能通过运算符进行运算。这样代码就更简洁，也容易理解。</p>
<p>例如：</p>
<p>complex_a 和 complex_b 是两个复数对象，求两个复数的和，希望的能直接写成：complex_a + complex_b</p>
<p>这时我们就需要对 <code>+</code> 号运算符进行重载。</p>
<p>这里举一个更加通俗易懂的例子：我写了一个类A，而我要让A定义的a和b相加，因为这个类是自定义的，所以a和b相加，系统是不可能知道你到底希望他得到什么结果，而这时可以重载运算符的话，那就方便的多了，我直接定义a + b的结果为多少即可。</p>
<p>这里实现一个打印类里面的成员的函数</p>
<p><img src="/images/C/image-20210611202308339.png" alt="image-20210611202308339"></p>
<p>这里我想每执行一次<code>lowValue</code>和<code>highValue</code>能够每次都加1，增加一个<code>Plus</code>函数</p>
<p><img src="/images/C/image-20210611202235226.png" alt="image-20210611202235226"></p>
<p>使用运算符重载实现，即定义<code>Number operator++();</code></p>
<p><img src="/images/C/image-20210611203228056.png" alt="image-20210611203228056"></p>
<p>定义<code>Number operator+()</code>实现自加</p>
<p><img src="/images/C/image-20210611205522482.png" alt="image-20210611205522482"></p>
<p>总结：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1、运算符重载就是函数替换(operator)		</span><br><span class="line">			</span><br><span class="line">2、. :: ?: sizeof # 不能重载			</span><br></pre></td></tr></table></figure>



<p>运算符重载可实现的符号代码如下：</p>
<p>注意这里在执行其他运算符(++ – + - * / )的时候，因为类型是从<code>int</code>到<code>int</code>类型不变，所以还是<code>Number</code>类型；但是执行比较大小运算符(&gt; &lt; ==)的时候，因为判断是否成立，返回的是布尔类型，所以需要写成<code>bool</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Number</span>		</span></span><br><span class="line"><span class="class">&#123;</span>		</span><br><span class="line"><span class="keyword">private</span>:		</span><br><span class="line">	<span class="keyword">int</span> lowValue;	</span><br><span class="line">	<span class="keyword">int</span> highValue;	</span><br><span class="line"><span class="keyword">public</span>:		</span><br><span class="line">	<span class="built_in">Number</span>(<span class="keyword">int</span> lowValue,<span class="keyword">int</span> highValue);	</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">()</span></span>;	</span><br><span class="line">	Number <span class="keyword">operator</span>++();	</span><br><span class="line">	Number <span class="keyword">operator</span>--();	</span><br><span class="line">	Number <span class="keyword">operator</span>+(<span class="keyword">const</span> Number&amp; p);	</span><br><span class="line">	Number <span class="keyword">operator</span>-(<span class="keyword">const</span> Number&amp; p);	</span><br><span class="line">	Number <span class="keyword">operator</span>*(<span class="keyword">const</span> Number&amp; p);	</span><br><span class="line">	Number <span class="keyword">operator</span>/(<span class="keyword">const</span> Number&amp; p);	</span><br><span class="line">	<span class="keyword">bool</span> <span class="keyword">operator</span>&gt;(<span class="keyword">const</span> Number&amp; p);	</span><br><span class="line">	<span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> Number&amp; p);	</span><br><span class="line">	<span class="keyword">bool</span> <span class="keyword">operator</span>==(<span class="keyword">const</span> Number&amp; p);	</span><br><span class="line">&#125;;		</span><br><span class="line">Number::<span class="built_in">Number</span>(<span class="keyword">int</span> lowValue,<span class="keyword">int</span> highValue)		</span><br><span class="line">&#123;		</span><br><span class="line">	<span class="keyword">this</span>-&gt;lowValue = lowValue;	</span><br><span class="line">	<span class="keyword">this</span>-&gt;highValue = highValue;	</span><br><span class="line">&#125;		</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Number::Print</span><span class="params">()</span>		</span></span><br><span class="line"><span class="function"></span>&#123;		</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,lowValue);	</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,highValue);	</span><br><span class="line">&#125;		</span><br><span class="line">Number Number::<span class="keyword">operator</span>++()		</span><br><span class="line">&#123;		</span><br><span class="line">	lowValue++;	</span><br><span class="line">	highValue++;	</span><br><span class="line">	<span class="keyword">return</span> *<span class="keyword">this</span>;	</span><br><span class="line">&#125;		</span><br><span class="line">Number Number::<span class="keyword">operator</span>--()		</span><br><span class="line">&#123;		</span><br><span class="line">	lowValue--;	</span><br><span class="line">	highValue--;	</span><br><span class="line">	<span class="keyword">return</span> *<span class="keyword">this</span>;	</span><br><span class="line">&#125;		</span><br><span class="line">Number Number::<span class="keyword">operator</span>+(<span class="keyword">const</span> Number&amp; p)		</span><br><span class="line">&#123;		</span><br><span class="line">	<span class="keyword">this</span>-&gt;highValue = <span class="keyword">this</span>-&gt;highValue + p.highValue;	</span><br><span class="line">	<span class="keyword">this</span>-&gt;lowValue = <span class="keyword">this</span>-&gt;lowValue + p.lowValue;	</span><br><span class="line">	<span class="keyword">return</span> *<span class="keyword">this</span>;	</span><br><span class="line">&#125;		</span><br><span class="line">Number Number::<span class="keyword">operator</span>-(<span class="keyword">const</span> Number&amp; p)		</span><br><span class="line">&#123;		</span><br><span class="line">	<span class="keyword">this</span>-&gt;highValue = <span class="keyword">this</span>-&gt;highValue - p.highValue;	</span><br><span class="line">	<span class="keyword">this</span>-&gt;lowValue = <span class="keyword">this</span>-&gt;lowValue - p.lowValue;	</span><br><span class="line">	<span class="keyword">return</span> *<span class="keyword">this</span>;	</span><br><span class="line">&#125;		</span><br><span class="line">Number Number::<span class="keyword">operator</span>*(<span class="keyword">const</span> Number&amp; p)		</span><br><span class="line">&#123;		</span><br><span class="line">	<span class="keyword">this</span>-&gt;highValue = <span class="keyword">this</span>-&gt;highValue * p.highValue;	</span><br><span class="line">	<span class="keyword">this</span>-&gt;lowValue = <span class="keyword">this</span>-&gt;lowValue * p.lowValue;	</span><br><span class="line">	<span class="keyword">return</span> *<span class="keyword">this</span>;	</span><br><span class="line">&#125;		</span><br><span class="line">Number Number::<span class="keyword">operator</span>/(<span class="keyword">const</span> Number&amp; p)		</span><br><span class="line">&#123;		</span><br><span class="line">	<span class="keyword">this</span>-&gt;highValue = <span class="keyword">this</span>-&gt;highValue / p.highValue;	</span><br><span class="line">	<span class="keyword">this</span>-&gt;lowValue = <span class="keyword">this</span>-&gt;lowValue / p.lowValue;	</span><br><span class="line">	<span class="keyword">return</span> *<span class="keyword">this</span>;	</span><br><span class="line">&#125;		</span><br><span class="line"><span class="keyword">bool</span> Number::<span class="keyword">operator</span>&gt;(<span class="keyword">const</span> Number&amp; p)		</span><br><span class="line">&#123;		</span><br><span class="line">	<span class="keyword">if</span>(<span class="keyword">this</span>-&gt;highValue &gt; p.highValue)	</span><br><span class="line">	&#123;	</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	&#125;	</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;	</span><br><span class="line">&#125;		</span><br><span class="line"><span class="keyword">bool</span> Number::<span class="keyword">operator</span>&lt;(<span class="keyword">const</span> Number&amp; p)		</span><br><span class="line">&#123;		</span><br><span class="line">	<span class="keyword">if</span>(<span class="keyword">this</span>-&gt;highValue &lt; p.highValue)	</span><br><span class="line">	&#123;	</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	&#125;	</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;	</span><br><span class="line">&#125;		</span><br><span class="line"><span class="keyword">bool</span> Number::<span class="keyword">operator</span>==(<span class="keyword">const</span> Number&amp; p)		</span><br><span class="line">&#123;		</span><br><span class="line">	<span class="keyword">if</span>(<span class="keyword">this</span>-&gt;highValue == p.highValue)	</span><br><span class="line">	&#123;	</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	&#125;	</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;	</span><br><span class="line">&#125;		</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Test</span><span class="params">()</span>		</span></span><br><span class="line"><span class="function"></span>&#123;		</span><br><span class="line">	<span class="function">Number <span class="title">p</span><span class="params">(<span class="number">1</span>,<span class="number">2</span>)</span>,<span class="title">p2</span><span class="params">(<span class="number">3</span>,<span class="number">4</span>)</span></span>;	</span><br><span class="line">	p++;	</span><br><span class="line">	p.<span class="built_in">Print</span>();	</span><br><span class="line">	p--;	</span><br><span class="line">	p.<span class="built_in">Print</span>();	</span><br><span class="line">		</span><br><span class="line">	p = p+p2;	</span><br><span class="line">	p.<span class="built_in">Print</span>();	</span><br><span class="line">		</span><br><span class="line">&#125;		</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span>		</span></span><br><span class="line"><span class="function"></span>&#123;		</span><br><span class="line">	<span class="built_in">Test</span>();	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="new-delete-vector"><a href="#new-delete-vector" class="headerlink" title="new delete vector"></a>new delete vector</h1><h2 id="malloc探究"><a href="#malloc探究" class="headerlink" title="malloc探究"></a>malloc探究</h2><p><code>malloc()</code>是人为写的一个分配内存空间的函数，探究一下究竟是哪个函数实现了<code>malloc()</code>的功能</p>
<p>手动分配1024个int空间</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>* pi = (<span class="keyword">int</span>*)<span class="built_in">malloc</span>(<span class="built_in"><span class="keyword">sizeof</span></span>(<span class="keyword">int</span>)*<span class="number">1024</span>);</span><br></pre></td></tr></table></figure>



<p>编译并运行发现pi指针一开始指向的地址是没有值的</p>
<p><img src="/images/C/image-20210613140748340.png" alt="image-20210613140748340"></p>
<p>F10单步往下走一下发现已经有了值，而且是一个地址，指向<code>372588</code></p>
<p><img src="/images/C/image-20210613140854522.png" alt="image-20210613140854522"></p>
<p>跟到<code>372588</code>这个地址进行查看，发现分配了1024个int</p>
<p><img src="/images/C/image-20210613140937210.png" alt="image-20210613140937210"></p>
<p>为了探究究竟是哪个函数实现了<code>malloc</code>分配内存空间的功能，进入反汇编f10单步走。最终执行到<code>401074</code>这个内存地址的时候地址对应的值变化了，所以这里实现<code>malloc</code>分配内存空间的功能的应该是<code>_nh_malloc_dbg</code>这个函数</p>
<p><img src="/images/C/image-20210613141110234.png" alt="image-20210613141110234"></p>
<p>f11跟进函数，继续f10单步往下走，这里看到一个E8 call，判断应该是跟之前一样的函数功能，f11跟进<code>_heap_alloc_dbg</code></p>
<p><img src="/images/C/image-20210613142228732.png" alt="image-20210613142228732"></p>
<p>继续f11跟进<code>_heap_alloc_base</code></p>
<p><img src="/images/C/image-20210613142704718.png" alt="image-20210613142704718"></p>
<p>在<code>4033AC</code>处调用<code>_imp_HeapAlloc</code>，这里可以看到这个call是FF，为间接调用，这里指向的就是<code>IAT</code>表</p>
<p><img src="/images/C/image-20210613143248318.png" alt="image-20210613143248318"></p>
<p>跟进去已经发现到dll模块了，这里<code>malloc</code>使用的就是<code>HeapAlloc</code>这个API</p>
<p><img src="/images/C/image-20210613144817518.png" alt="image-20210613144817518"></p>
<p>总结如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">malloc-&gt;_nh_malloc_dbg-&gt;_heap_alloc_dbg-&gt;_heap_alloc_base-&gt;HeapAlloc							</span><br></pre></td></tr></table></figure>



<h2 id="free探究"><a href="#free探究" class="headerlink" title="free探究"></a>free探究</h2><p><img src="/images/C/image-20210613150157305.png" alt="image-20210613150157305"></p>
<p><img src="/images/C/image-20210613150607876.png" alt="image-20210613150607876"></p>
<p><img src="/images/C/image-20210613150842595.png" alt="image-20210613150842595"></p>
<p>到最后可以发现跟到的是<code>HeapFree</code>这个API</p>
<p>总结如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">free-&gt;_free_dbg-&gt;_free_base-&gt;HeapFree			</span><br></pre></td></tr></table></figure>



<h2 id="new-amp-delete"><a href="#new-amp-delete" class="headerlink" title="new&amp;delete"></a>new&amp;delete</h2><p><code>new</code>关键字即在堆里面分配一块空间，注意用<code>new</code>的时候返回的是地址，所以要使用指针</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>* pi = <span class="keyword">new</span> <span class="keyword">int</span>;</span><br></pre></td></tr></table></figure>



<p>也是进入反汇编跟函数，这里直接总结<code>new</code>如下</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_nh_malloc-&gt;_nh_malloc_dbg-&gt;_heap_alloc_dbg-&gt;_heap_alloc_base-&gt;HeapAlloc</span><br></pre></td></tr></table></figure>



<p>在C++里<code>new</code>跟<code>malloc</code>没有本质区别，都是分配一块空间，在C++里释放堆的空间对应的关键词为<code>delete</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>* pi = <span class="keyword">new</span> <span class="keyword">int</span>;</span><br><span class="line"><span class="keyword">delete</span> pi;</span><br></pre></td></tr></table></figure>



<p>关于<code>delete</code>的总结如下</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_free_dbg-&gt;_free_base-&gt;HeapFree</span><br></pre></td></tr></table></figure>



<p>使用<code>new</code>在堆里创建一个<code>Person</code>类</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">int</span> x;</span><br><span class="line">	<span class="keyword">int</span> y;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Person</span>()</span><br><span class="line">	&#123;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">Person</span>(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;x = x;</span><br><span class="line">		<span class="keyword">this</span>-&gt;y = y;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span>* pi = <span class="keyword">new</span> <span class="keyword">int</span>;</span><br><span class="line"></span><br><span class="line">	Person* pa = <span class="keyword">new</span> Person;	<span class="comment">//new Person()</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span>* pk = <span class="keyword">new</span> <span class="built_in"><span class="keyword">int</span></span>(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">	Person* pb = <span class="keyword">new</span> <span class="built_in">Person</span>(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">delete</span> pi,pk;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">delete</span> pa,pb;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>这里有一个特例，如果使用<code>new</code>创建数组，在<code>delete</code>的时候就需要使用<code>delete[]</code>，代码如下所示</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>* i = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">5</span>];</span><br><span class="line"><span class="keyword">delete</span>[] i;</span><br></pre></td></tr></table></figure>



<p>这里定义一个析构函数，f10单步跟一下</p>
<p><img src="/images/C/image-20210613153816477.png" alt="image-20210613153816477"></p>
<p>可以看到析构函数是在<code>delete</code>执行的时候才执行的</p>
<p><img src="/images/C/image-20210613153832449.png" alt="image-20210613153832449"></p>
<h2 id="vector"><a href="#vector" class="headerlink" title="vector"></a>vector</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1、本质就是一个数组		</span><br><span class="line">		</span><br><span class="line">2、可以动态扩充容量		</span><br><span class="line">		</span><br><span class="line">3、支持下标方法，查询性能好		</span><br><span class="line">		</span><br><span class="line">4、新增数据和删除数据较差</span><br></pre></td></tr></table></figure>



<p>实现一个vector类</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// cplus vector.cpp : Defines the entry point for the console application.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SUCCESS    1 <span class="comment">// 成功							</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ERROR	-1 <span class="comment">// 失败							</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MALLOC_ERROR	-2 <span class="comment">// 申请内存失败							</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> INDEX_ERROR    -3 <span class="comment">// 错误的索引号							</span></span></span><br><span class="line">										</span><br><span class="line">										</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T_ELE</span>&gt;</span>										</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Vector</span>										</span></span><br><span class="line"><span class="class">&#123;</span>										</span><br><span class="line"><span class="keyword">public</span>:										</span><br><span class="line">	<span class="built_in">Vector</span>();									</span><br><span class="line">	<span class="built_in">Vector</span>(DWORD dwSize);									</span><br><span class="line">	~<span class="built_in">Vector</span>();									</span><br><span class="line"><span class="keyword">public</span>:										</span><br><span class="line">	<span class="function">DWORD	<span class="title">at</span><span class="params">(DWORD dwIndex,OUT T_ELE* pEle)</span></span>;	   <span class="comment">//根据给定的索引得到元素			</span></span><br><span class="line">    <span class="function">DWORD   <span class="title">push_back</span><span class="params">(T_ELE Element)</span></span>;	<span class="comment">//将元素存储到容器最后一个位置			</span></span><br><span class="line">	<span class="function">VOID	<span class="title">pop_back</span><span class="params">()</span></span>;	   <span class="comment">//删除最后一个元素			</span></span><br><span class="line">	<span class="function">DWORD	<span class="title">insert</span><span class="params">(DWORD dwIndex, T_ELE Element)</span></span>;	<span class="comment">//向指定位置新增一个元素			</span></span><br><span class="line">	<span class="function">DWORD	<span class="title">capacity</span><span class="params">()</span></span>;	   <span class="comment">//返回在不增容的情况下，还能存储多少元素			</span></span><br><span class="line">	<span class="function">VOID	<span class="title">clear</span><span class="params">()</span></span>;	<span class="comment">//清空所有元素			</span></span><br><span class="line">	<span class="function">BOOL	<span class="title">empty</span><span class="params">()</span></span>;	<span class="comment">//判断Vector是否为空 返回true时为空			</span></span><br><span class="line">	<span class="function">VOID	<span class="title">erase</span><span class="params">(DWORD dwIndex)</span></span>;	  <span class="comment">//删除指定元素			</span></span><br><span class="line">	<span class="function">DWORD	<span class="title">size</span><span class="params">()</span></span>;		<span class="comment">//返回Vector元素数量的大小			</span></span><br><span class="line"><span class="keyword">private</span>:										</span><br><span class="line">	<span class="function">BOOL	<span class="title">expand</span><span class="params">()</span></span>;								</span><br><span class="line"><span class="keyword">private</span>:										</span><br><span class="line">	DWORD  m_dwIndex;	<span class="comment">//下一个可用索引			</span></span><br><span class="line">	DWORD  m_dwIncrement;	<span class="comment">//每次增容的大小			</span></span><br><span class="line">	DWORD  m_dwLen;		<span class="comment">//当前容器的长度			</span></span><br><span class="line">	DWORD  m_dwInitSize;	<span class="comment">//默认初始化大小			</span></span><br><span class="line">	T_ELE *m_pVector;	<span class="comment">//容器指针			</span></span><br><span class="line">&#125;;										</span><br><span class="line">										</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T_ELE</span>&gt;</span>										</span><br><span class="line">Vector&lt;T_ELE&gt;::<span class="built_in">Vector</span>()										</span><br><span class="line">:<span class="built_in">m_dwInitSize</span>(<span class="number">100</span>),<span class="built_in">m_dwIncrement</span>(<span class="number">5</span>)		<span class="comment">//默认初始化大小为100,每次增容大小为5									</span></span><br><span class="line">&#123;										</span><br><span class="line">	<span class="comment">//1.创建长度为m_dwInitSize个T_ELE对象									</span></span><br><span class="line">	</span><br><span class="line">	m_pVector = <span class="keyword">new</span> T_ELE[m_dwInitSize];</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//2.将新创建的空间初始化			</span></span><br><span class="line">	</span><br><span class="line">	<span class="built_in">memset</span>(m_pVector,<span class="number">0</span>, *m_dwInitSize <span class="built_in"><span class="keyword">sizeof</span></span>(T_ELE));	</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//3.设置其他值</span></span><br><span class="line">	</span><br><span class="line">	m_dwLen = m_dwInitSize;</span><br><span class="line">	m_dwIndex = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">										</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T_ELE</span>&gt;</span>										</span><br><span class="line">Vector&lt;T_ELE&gt;::<span class="built_in">Vector</span>(DWORD dwSize)										</span><br><span class="line">:<span class="built_in">m_dwIncrement</span>(<span class="number">5</span>)	<span class="comment">//增容大小为5							</span></span><br><span class="line">&#123;										</span><br><span class="line">	<span class="comment">//1.创建长度为dwSize个T_ELE对象									</span></span><br><span class="line">			</span><br><span class="line">	m_pVector = <span class="keyword">new</span> T_ELE[dwSize];</span><br><span class="line"></span><br><span class="line">	<span class="comment">//2.将新创建的空间初始化	</span></span><br><span class="line">	</span><br><span class="line">	<span class="built_in">memset</span>(m_pVector,<span class="number">0</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(T_ELE) *dwSize);</span><br><span class="line">										</span><br><span class="line">	<span class="comment">//3.设置其他值</span></span><br><span class="line">	</span><br><span class="line">	m_dwLen = dwSize;</span><br><span class="line">	m_dwIndex = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">										</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T_ELE</span>&gt;</span>										</span><br><span class="line">Vector&lt;T_ELE&gt;::~<span class="built_in">Vector</span>()	<span class="comment">//析构函数										</span></span><br><span class="line">&#123;										</span><br><span class="line">										</span><br><span class="line">	<span class="comment">//释放空间 delete[]</span></span><br><span class="line">	<span class="keyword">delete</span>[] m_Vectory;</span><br><span class="line">	m_Vectory = <span class="literal">NULL</span>;</span><br><span class="line">										</span><br><span class="line">&#125;										</span><br><span class="line">										</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T_ELE</span>&gt;</span>										</span><br><span class="line">BOOL Vector&lt;T_ELE&gt;::<span class="built_in">expand</span>()	<span class="comment">//空间不够时增容											</span></span><br><span class="line">&#123;	</span><br><span class="line">	DWORD templen = <span class="number">0</span>;</span><br><span class="line">	T_ELE* ptemp = <span class="number">0</span>;</span><br><span class="line">	<span class="comment">// 1. 计算增加后的长度									</span></span><br><span class="line"></span><br><span class="line">	templen = m_dwLen + m_dwIncrement;</span><br><span class="line">										</span><br><span class="line">	<span class="comment">// 2. 申请空间									</span></span><br><span class="line">	</span><br><span class="line">	ptemp = <span class="keyword">new</span> T_ELE[templen];</span><br><span class="line">	<span class="built_in">memset</span>(ptemp, <span class="number">0</span>,<span class="built_in"><span class="keyword">sizeof</span></span>(T_ELE) *templen);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 3. 将数据复制到新的空间									</span></span><br><span class="line">	</span><br><span class="line">	<span class="built_in">memcpy</span>(ptemp, m_pVector,<span class="built_in"><span class="keyword">sizeof</span></span>(T_ELE) *m_dwLen);</span><br><span class="line">										</span><br><span class="line">	<span class="comment">// 4. 释放原来空间									</span></span><br><span class="line">				</span><br><span class="line">	<span class="keyword">delete</span>[] m_pVector;</span><br><span class="line">	m_pVector = ptemp;</span><br><span class="line">	ptemp = <span class="literal">NULL</span>;</span><br><span class="line">								</span><br><span class="line">	<span class="comment">// 5. 为各种属性赋值									</span></span><br><span class="line">	</span><br><span class="line">	m_dwLen = templen;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> SUCCESS;</span><br><span class="line">&#125;										</span><br><span class="line">										</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T_ELE</span>&gt;</span>										</span><br><span class="line">DWORD  Vector&lt;T_ELE&gt;::<span class="built_in">push_back</span>(T_ELE Element)	<span class="comment">//将元素存储到容器最后一个位置									</span></span><br><span class="line">&#123;										</span><br><span class="line">	<span class="comment">//1.判断是否需要增容，如果需要就调用增容的函数									</span></span><br><span class="line">				</span><br><span class="line">	<span class="keyword">if</span> (m_dwIndex &gt;= m_dwLen)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">expand</span>();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//2.将新的元素复制到容器的最后一个位置									</span></span><br><span class="line">			</span><br><span class="line">	<span class="built_in">memcpy</span>(&amp;m_pVector[m_dwIndex], &amp;Element, <span class="built_in"><span class="keyword">sizeof</span></span>(T_ELE));</span><br><span class="line"></span><br><span class="line">	<span class="comment">//3.修改属性值		</span></span><br><span class="line">	</span><br><span class="line">	m_dwIndex++;</span><br><span class="line">	<span class="keyword">return</span> SUCCESS;</span><br><span class="line">										</span><br><span class="line">&#125;										</span><br><span class="line">										</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T_ELE</span>&gt;</span>										</span><br><span class="line">DWORD  Vector&lt;T_ELE&gt;::<span class="built_in">insert</span>(DWORD dwIndex, T_ELE Element)	<span class="comment">//向指定位置新增一个元素										</span></span><br><span class="line">&#123;	</span><br><span class="line">	<span class="comment">//1.判断索引是否在合理区间</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (dwIndex &lt; <span class="number">0</span> || dwIndex &gt; m_dwIndex)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;Index is not in a reasonable range,please try again!&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> INDEX_ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//2.判断是否需要增容，如果需要就调用增容的函数									</span></span><br><span class="line">			</span><br><span class="line">	<span class="keyword">if</span> (m_dwIndex &gt;= m_dwLen)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">expand</span>();</span><br><span class="line">	&#125;</span><br><span class="line">											</span><br><span class="line">	<span class="comment">//3.将dwIndex之后的元素后移	</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span> (DWORD i = m_dwIndex; i &gt; dwIndex ; i--)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">memcpy</span>(&amp;m_pVector[i], &amp;m_pVector[i<span class="number">-1</span>], <span class="built_in"><span class="keyword">sizeof</span></span>(T_ELE));</span><br><span class="line">	&#125;</span><br><span class="line">																	</span><br><span class="line">	<span class="comment">//4.将Element元素复制到dwIndex位置									</span></span><br><span class="line">										</span><br><span class="line">	<span class="built_in">memcpy</span>(&amp;m_pVector[dwIndex], &amp;Element, <span class="built_in"><span class="keyword">sizeof</span></span>(T_ELE));			</span><br><span class="line"></span><br><span class="line">	<span class="comment">//5.修改属性值	</span></span><br><span class="line">	</span><br><span class="line">	m_dwIndex++;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> SUCCESS;</span><br><span class="line">&#125;</span><br><span class="line">	</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T_ELE</span>&gt;</span>										</span><br><span class="line">DWORD Vector&lt;T_ELE&gt;::<span class="built_in">at</span>(DWORD dwIndex,T_ELE* pEle)	<span class="comment">//根据给定的索引得到元素									</span></span><br><span class="line">&#123;										</span><br><span class="line">	<span class="comment">//判断索引是否在合理区间</span></span><br><span class="line">	<span class="comment">//将dwIndex的值复制到pEle指定的内存	</span></span><br><span class="line">										</span><br><span class="line">	<span class="keyword">if</span>(dwIndex &gt;= <span class="number">0</span> &amp;&amp; dwIndex &lt;= m_dwIndex)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">memcpy</span>(pEle, &amp;m_pVector[dwIndex], <span class="built_in"><span class="keyword">sizeof</span></span>(T_ELE));</span><br><span class="line">		<span class="keyword">return</span> SUCCESS;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;Index is not in a reasonable range,please try again!&quot;</span>);	</span><br><span class="line">		<span class="keyword">return</span> INDEX_ERROR;</span><br><span class="line">	&#125;		</span><br><span class="line">&#125;										</span><br><span class="line">		</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T_ELE</span>&gt;</span></span><br><span class="line">VOID Vector&lt;T_ELE&gt;::<span class="built_in">pop_back</span>()	<span class="comment">//删除最后一个元素</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">memset</span>(&amp;m_pVector[m_dwIndex], <span class="number">0</span> , <span class="built_in"><span class="keyword">sizeof</span></span>(T_ELE));</span><br><span class="line">&#125;								</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T_ELE</span>&gt;</span></span><br><span class="line">DWORD Vector&lt;T_ELE&gt;::<span class="built_in">capacity</span>()	<span class="comment">//返回在不增容的情况下，还能存储多少元素</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> m_dwLen - m_dwIndex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T_ELE</span>&gt;</span></span><br><span class="line">VOID Vector&lt;T_ELE&gt;::<span class="built_in">clear</span>()	<span class="comment">//清空所有元素</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">memset</span>(m_pVector, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(T_ELE) *m_dwIndex)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T_ELE</span>&gt;</span></span><br><span class="line">BOOL Vector&lt;T_ELE&gt;::<span class="built_in">empty</span>()	<span class="comment">//判断Vector是否为空 返回true时为空	</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; m_dwLen ; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (m_pVector[i] = <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">return</span> TRUE;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> FALSE;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T_ELE</span>&gt;</span></span><br><span class="line">VOID Vector&lt;T_ELE&gt;::<span class="built_in">erase</span>(DWORD dwIndex)	<span class="comment">//删除指定元素</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> t= dwIndex ; t &lt; m_dwIndex ; t++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">memcpy</span>(&amp;m_pVector[t+<span class="number">1</span>], &amp;m_pVector[t], <span class="built_in"><span class="keyword">sizeof</span></span>(T_ELE));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T_ELE</span>&gt;</span></span><br><span class="line">DWORD Vector&lt;T_ELE&gt;::<span class="built_in">size</span>()	<span class="comment">//返回Vector元素数量的大小</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> m_dwIndex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrintVector</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> x = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> y = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	Vector&lt;<span class="keyword">int</span>&gt;* pVector = <span class="keyword">new</span> Vector&lt;<span class="keyword">int</span>&gt;(<span class="number">3</span>);</span><br><span class="line">	</span><br><span class="line">	pVector-&gt;<span class="built_in">push_back</span>(<span class="number">1</span>);</span><br><span class="line">	pVector-&gt;<span class="built_in">push_back</span>(<span class="number">2</span>);</span><br><span class="line">	pVector-&gt;<span class="built_in">push_back</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">	pVector-&gt;<span class="built_in">insert</span>(<span class="number">0</span>,<span class="number">9</span>);</span><br><span class="line"></span><br><span class="line">	pVector-&gt;<span class="built_in">at</span>(<span class="number">2</span>,&amp;x);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, x);</span><br><span class="line"></span><br><span class="line">	pVector-&gt;<span class="built_in">pop_back</span>();</span><br><span class="line"></span><br><span class="line">	pVector-&gt;<span class="built_in">capacity</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//pVector-&gt;clear();</span></span><br><span class="line"></span><br><span class="line">	pVector-&gt;<span class="built_in">empty</span>();</span><br><span class="line"></span><br><span class="line">	pVector-&gt;<span class="built_in">erase</span>(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">	pVector-&gt;<span class="built_in">size</span>();	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">PrintVector</span>();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


    </article>
    <!-- license -->
    
        <div class="license-wrapper">
            <p>原文作者：<a href="http://example.com">Drunkmars</a>
            <p>原文链接：<a href="http://example.com/2021/06/03/C++/">http://example.com/2021/06/03/C++/</a>
            <p>发表日期：<a href="http://example.com/2021/06/03/C++/">June 3rd 2021, 12:00:00 am</a>
            <p>更新日期：<a href="http://example.com/2021/06/03/C++/">June 15th 2021, 12:03:25 am</a>
            <p>版权声明：本文采用<a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by-nc/4.0/">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可</p>
        </div>
    
    <!-- paginator -->
    <ul class="post-paginator">
        <li class="next">
            
                <div class="nextSlogan">Next Post</div>
                <a href="/2021/06/04/nullptr/" title="NULL、0、nullptr 区别分析">
                    <div class="nextTitle">NULL、0、nullptr 区别分析</div>
                </a>
            
        </li>
        <li class="previous">
            
                <div class="prevSlogan">Previous Post</div>
                <a href="/2021/06/02/RPC%E6%8F%90%E6%9D%83/" title="RPC提权">
                    <div class="prevTitle">RPC提权</div>
                </a>
            
        </li>
    </ul>
    <!-- comment -->
    
        <div class="post-comment">
            <!-- 来必力 City 版安装代码 -->


            

            

            

            <!-- utteranc评论 -->


            <!-- partial('_partial/comment/changyan') -->
            <!--PC版-->


            
            

        </div>
    
    <!-- timeliness note -->
    <!-- idea from: https://hexo.fluid-dev.com/posts/hexo-injector/#%E6%96%87%E7%AB%A0%E6%97%B6%E6%95%88%E6%80%A7%E6%8F%90%E7%A4%BA -->
    
    <!-- Mathjax -->
    
</main>

                <!-- profile -->
                
            </div>
            <footer class="footer footer-unloaded">
    <!-- social  -->
    
        <div class="social">
            
    
        
            
                <a href="mailto:drunkmars@vip.qq.com" class="iconfont-archer email" title=email ></a>
            
        
    
        
            
                <a href="https://github.com/Drunkmars" class="iconfont-archer github" target="_blank" title=github></a>
            
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            
                <a href="https://twitter.com/Drunkmars404" class="iconfont-archer twitter" target="_blank" title=twitter></a>
            
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            
                <a href="/atom.xml" class="iconfont-archer rss" target="_blank" title=rss></a>
            
        
    


        </div>
    
    <!-- powered by Hexo  -->
    <div class="copyright">
        <span id="hexo-power">Powered by <a href="https://hexo.io/" target="_blank">Hexo</a></span><span class="iconfont-archer power">&#xe635;</span><span id="theme-info">theme <a href="https://github.com/fi3ework/hexo-theme-archer" target="_blank">Archer</a></span>
    </div>
    <!-- website approve for Chinese user -->
    
    <!-- 不蒜子  -->
    
        <div class="busuanzi-container">
            
             
                <span id="busuanzi_container_site_pv">PV: <span id="busuanzi_value_site_pv"></span> :)</span>
            
        </div>
    	
</footer>

        </div>
        <!-- toc -->
        
            <div class="toc-wrapper toc-wrapper-loding" style=







    top:50vh;

>
                <div class="toc-catalog">
                    <span class="iconfont-archer catalog-icon">&#xe613;</span><span>CATALOG</span>
                </div>
                <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#this%E7%B1%BB%E6%8C%87%E9%92%88"><span class="toc-number">1.</span> <span class="toc-text">this类指针</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#this%E6%8C%87%E9%92%88%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">1.1.</span> <span class="toc-text">this指针的作用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%87%BD%E6%95%B0%E5%92%8C%E7%BB%93%E6%9E%84%E4%BD%93%E5%87%BD%E6%95%B0%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">1.2.</span> <span class="toc-text">全局函数和结构体函数的区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A9%BA%E7%BB%93%E6%9E%84%E4%BD%93%E7%9A%84%E5%A4%A7%E5%B0%8F"><span class="toc-number">1.3.</span> <span class="toc-text">空结构体的大小</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%A4%E4%B8%AA%E7%BB%93%E6%9E%84%E4%BD%93%E5%87%BD%E6%95%B0"><span class="toc-number">1.4.</span> <span class="toc-text">两个结构体函数</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF-%E6%9E%84%E9%80%A0-%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0"><span class="toc-number">2.</span> <span class="toc-text">继承 构造-析构函数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8D%E8%BD%BD%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">2.1.</span> <span class="toc-text">重载的概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">2.2.</span> <span class="toc-text">构造函数的特点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">2.3.</span> <span class="toc-text">析构函数的特点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF"><span class="toc-number">2.4.</span> <span class="toc-text">继承</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E5%B1%82%E7%BB%A7%E6%89%BF"><span class="toc-number">2.4.1.</span> <span class="toc-text">多层继承</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E9%87%8D%E7%BB%A7%E6%89%BF"><span class="toc-number">2.4.2.</span> <span class="toc-text">多重继承</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%90%E6%9E%84-%E7%BB%A7%E6%89%BF%E7%BB%83%E4%B9%A0%E9%A2%98"><span class="toc-number">2.5.</span> <span class="toc-text">析构 继承练习题</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6"><span class="toc-number">3.</span> <span class="toc-text">权限控制</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%98%E5%8C%96%E4%BB%A3%E7%A0%81"><span class="toc-number">3.1.</span> <span class="toc-text">优化代码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6-1"><span class="toc-number">3.2.</span> <span class="toc-text">权限控制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#private%E6%B7%B1%E5%85%A5%E6%8E%A2%E8%AE%A8"><span class="toc-number">3.3.</span> <span class="toc-text">private深入探讨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#class%E5%92%8Cstruct%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">3.4.</span> <span class="toc-text">class和struct的区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#private%E6%98%AF%E5%90%A6%E8%A2%AB%E7%BB%A7%E6%89%BF"><span class="toc-number">3.5.</span> <span class="toc-text">private是否被继承</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#C-%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6%E7%BB%83%E4%B9%A0%E9%A2%98"><span class="toc-number">3.6.</span> <span class="toc-text">C++权限控制练习题</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%99%9A%E5%87%BD%E6%95%B0%E8%A1%A8"><span class="toc-number">4.</span> <span class="toc-text">虚函数表</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%99%9A%E5%87%BD%E6%95%B0%EF%BC%9A%E9%97%B4%E6%8E%A5%E8%B0%83%E7%94%A8"><span class="toc-number">4.1.</span> <span class="toc-text">虚函数：间接调用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%B1%E5%85%A5%E8%99%9A%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8"><span class="toc-number">4.2.</span> <span class="toc-text">深入虚函数调用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%93%E5%8D%B0%E8%99%9A%E5%87%BD%E6%95%B0%E8%A1%A8"><span class="toc-number">4.3.</span> <span class="toc-text">打印虚函数表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#C-%E8%99%9A%E5%87%BD%E6%95%B0%E8%A1%A8%E7%BB%83%E4%B9%A0"><span class="toc-number">4.4.</span> <span class="toc-text">C++虚函数表练习</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E7%BB%91%E5%AE%9A-%E5%A4%9A%E6%80%81"><span class="toc-number">5.</span> <span class="toc-text">动态绑定 多态</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF%E6%80%BB%E7%BB%93"><span class="toc-number">5.1.</span> <span class="toc-text">继承总结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E7%BB%A7%E6%89%BF%E6%97%A0%E5%87%BD%E6%95%B0%E8%A6%86%E7%9B%96"><span class="toc-number">5.1.1.</span> <span class="toc-text">单继承无函数覆盖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E7%BB%A7%E6%89%BF%E6%9C%89%E5%87%BD%E6%95%B0%E8%A6%86%E7%9B%96"><span class="toc-number">5.1.2.</span> <span class="toc-text">单继承有函数覆盖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E7%BB%A7%E6%89%BF%E6%97%A0%E5%87%BD%E6%95%B0%E8%A6%86%E7%9B%96"><span class="toc-number">5.1.3.</span> <span class="toc-text">多继承无函数覆盖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E7%BB%A7%E6%89%BF%E6%9C%89%E5%87%BD%E6%95%B0%E8%A6%86%E7%9B%96"><span class="toc-number">5.1.4.</span> <span class="toc-text">多继承有函数覆盖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E9%87%8D%E7%BB%A7%E6%89%BF%E6%97%A0%E5%87%BD%E6%95%B0%E8%A6%86%E7%9B%96"><span class="toc-number">5.1.5.</span> <span class="toc-text">多重继承无函数覆盖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E9%87%8D%E7%BB%A7%E6%89%BF%E6%9C%89%E5%87%BD%E6%95%B0%E8%A6%86%E7%9B%96"><span class="toc-number">5.1.6.</span> <span class="toc-text">多重继承有函数覆盖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E9%87%8D%E7%BB%A7%E6%89%BF%E6%9C%89%E5%87%BD%E6%95%B0%E8%A6%86%E7%9B%962"><span class="toc-number">5.1.7.</span> <span class="toc-text">多重继承有函数覆盖2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E9%87%8D%E7%BB%A7%E6%89%BF%E6%9C%89%E5%87%BD%E6%95%B0%E8%A6%86%E7%9B%963"><span class="toc-number">5.1.8.</span> <span class="toc-text">多重继承有函数覆盖3</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E6%9C%9F%E7%BB%91%E5%AE%9A%E5%92%8C%E5%8A%A8%E6%80%81%E7%BB%91%E5%AE%9A-amp-%E5%A4%9A%E6%80%81"><span class="toc-number">5.2.</span> <span class="toc-text">前期绑定和动态绑定&amp;多态</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E7%BB%91%E5%AE%9A%E6%8E%A2%E7%A9%B6"><span class="toc-number">5.2.1.</span> <span class="toc-text">动态绑定探究</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E6%80%81%E6%8E%A2%E7%A9%B6"><span class="toc-number">5.2.2.</span> <span class="toc-text">多态探究</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0%E5%86%99%E6%88%90virtual%E7%9A%84%E5%8E%9F%E5%9B%A0"><span class="toc-number">5.2.3.</span> <span class="toc-text">析构函数写成virtual的原因</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%A8%A1%E6%9D%BF"><span class="toc-number">6.</span> <span class="toc-text">模板</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F"><span class="toc-number">6.1.</span> <span class="toc-text">冒泡排序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8A%98%E5%8D%8A%E6%9F%A5%E6%89%BE"><span class="toc-number">6.2.</span> <span class="toc-text">折半查找</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E6%9D%BF-1"><span class="toc-number">6.3.</span> <span class="toc-text">模板</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%95%E7%94%A8-%E5%8F%8B%E5%85%83-%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BD"><span class="toc-number">7.</span> <span class="toc-text">引用 友元 运算符重载</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E7%94%A8"><span class="toc-number">7.1.</span> <span class="toc-text">引用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E9%92%88%E5%92%8C%E5%BC%95%E7%94%A8%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">7.2.</span> <span class="toc-text">指针和引用的区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%8B%E5%85%83%E5%87%BD%E6%95%B0"><span class="toc-number">7.3.</span> <span class="toc-text">友元函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BD"><span class="toc-number">7.4.</span> <span class="toc-text">运算符重载</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#new-delete-vector"><span class="toc-number">8.</span> <span class="toc-text">new delete vector</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#malloc%E6%8E%A2%E7%A9%B6"><span class="toc-number">8.1.</span> <span class="toc-text">malloc探究</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#free%E6%8E%A2%E7%A9%B6"><span class="toc-number">8.2.</span> <span class="toc-text">free探究</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#new-amp-delete"><span class="toc-number">8.3.</span> <span class="toc-text">new&amp;delete</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vector"><span class="toc-number">8.4.</span> <span class="toc-text">vector</span></a></li></ol></li></ol>
            </div>
        
        <!-- sidebar -->
        <div class="sidebar sidebar-hide">
    <ul class="sidebar-tabs sidebar-tabs-active-0">
        <li class="sidebar-tab-archives"><span class="iconfont-archer">&#xe67d;</span><span class="tab-name">Archive</span></li>
        <li class="sidebar-tab-tags"><span class="iconfont-archer">&#xe61b;</span><span class="tab-name">Tag</span></li>
        <li class="sidebar-tab-categories"><span class="iconfont-archer">&#xe666;</span><span class="tab-name">Cate</span></li>
    </ul>
    <div class="sidebar-content sidebar-content-show-archive">
        <div class="sidebar-panel-archives">
    <!-- 在 ejs 中将 archive 按照时间排序 -->
    
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
    
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
    
    
    
    
    <div class="total-and-search">
        <div class="total-archive">
        Total : 85
        </div>
        <!-- search  -->
        
    </div>
    
    <div class="post-archive">
    
        
            
            
            <div class="archive-year"> 2021 </div>
            <ul class="year-list">
            
        
        <li class="archive-post-item">
            <span class="archive-post-date">10/07</span>
            <a class="archive-post-title" href="/2021/10/07/com%E5%8A%AB%E6%8C%81/">初探com劫持</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">10/04</span>
            <a class="archive-post-title" href="/2021/10/04/csv%E6%B3%A8%E5%85%A5/">CSV注入获取meterpreter</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">10/04</span>
            <a class="archive-post-title" href="/2021/10/04/%E5%8F%8D%E6%B2%99%E7%AE%B1%E8%B0%83%E8%AF%95/">反沙箱调试</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">10/04</span>
            <a class="archive-post-title" href="/2021/10/04/%E7%88%B6%E8%BF%9B%E7%A8%8B%E4%BC%AA%E9%80%A0/">父进程伪造</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">10/04</span>
            <a class="archive-post-title" href="/2021/10/04/%E8%B0%83%E8%AF%95%E4%B8%8E%E5%8F%8D%E8%B0%83%E8%AF%95%E7%9A%84%E6%8E%A2%E7%A9%B6/">调试与反调试的探究</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">10/03</span>
            <a class="archive-post-title" href="/2021/10/03/dll%E5%8A%AB%E6%8C%81/">初探dll劫持</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">10/01</span>
            <a class="archive-post-title" href="/2021/10/01/dll%E6%B3%A8%E5%85%A5/">关于几种dll注入的学习</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">09/26</span>
            <a class="archive-post-title" href="/2021/09/26/%E5%86%85%E7%BD%91%E8%BD%AC%E5%8F%91/">浅谈内网转发与流量代理</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">09/13</span>
            <a class="archive-post-title" href="/2021/09/13/%E8%AE%B0%E4%B8%80%E6%AC%A1%E5%A4%96%E7%BD%91%E6%89%93%E7%82%B9%E5%88%B0%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/">记一次外网打点到内网渗透</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">09/12</span>
            <a class="archive-post-title" href="/2021/09/12/hook%E6%8A%80%E6%9C%AF/">hook技术详解</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">09/10</span>
            <a class="archive-post-title" href="/2021/09/10/mysql%E6%8F%90%E6%9D%83%E6%80%BB%E7%BB%93/">mysql提权总结</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">08/23</span>
            <a class="archive-post-title" href="/2021/08/23/php/">php漏洞大杂烩</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">08/20</span>
            <a class="archive-post-title" href="/2021/08/20/struts2/">struts2漏洞总结</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">08/16</span>
            <a class="archive-post-title" href="/2021/08/16/tomcat/">tomcat漏洞大杂烩</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">08/09</span>
            <a class="archive-post-title" href="/2021/08/09/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA4/">红日靶场4</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">08/04</span>
            <a class="archive-post-title" href="/2021/08/04/weblogic/">weblogic漏洞大杂烩</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">07/28</span>
            <a class="archive-post-title" href="/2021/07/28/%E7%AA%83%E5%8F%96hash/">浅谈域环境下布置水坑实现hash窃取</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">07/21</span>
            <a class="archive-post-title" href="/2021/07/21/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA2/">红日靶场2</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">07/20</span>
            <a class="archive-post-title" href="/2021/07/20/redis/">redis漏洞总结</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">07/19</span>
            <a class="archive-post-title" href="/2021/07/19/spring/">spring漏洞总结</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">07/19</span>
            <a class="archive-post-title" href="/2021/07/19/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA3/">红日靶场3</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">07/17</span>
            <a class="archive-post-title" href="/2021/07/17/%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5%E4%B8%8E%E7%BA%BF%E7%A8%8B%E4%BA%92%E6%96%A5/">线程同步与线程互斥</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">07/16</span>
            <a class="archive-post-title" href="/2021/07/16/win32%E4%B8%B4%E7%95%8C%E5%8C%BA%E4%BA%92%E6%96%A5%E4%BD%93/">临界区与互斥体</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">07/06</span>
            <a class="archive-post-title" href="/2021/07/06/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA5/">红日靶场5</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">07/05</span>
            <a class="archive-post-title" href="/2021/07/05/vmtest/">一种简单的反虚拟机调试方法</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">06/17</span>
            <a class="archive-post-title" href="/2021/06/17/win32/">win32</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">06/16</span>
            <a class="archive-post-title" href="/2021/06/16/C++%E4%BA%8C%E5%8F%89%E6%A0%91/">C++二叉树实现</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">06/15</span>
            <a class="archive-post-title" href="/2021/06/15/C++%E9%93%BE%E8%A1%A8/">C++链表实现</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">06/13</span>
            <a class="archive-post-title" href="/2021/06/13/msf%E7%94%9F%E6%88%90%E6%9C%A8%E9%A9%AC/">msf生成木马小结</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">06/11</span>
            <a class="archive-post-title" href="/2021/06/11/certutil%E6%8E%A2%E7%A9%B6/">certutil探究</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">06/10</span>
            <a class="archive-post-title" href="/2021/06/10/%E6%A8%AA%E5%90%91%E7%A7%BB%E5%8A%A8%E6%80%BB%E7%BB%93/">横向移动总结</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">06/09</span>
            <a class="archive-post-title" href="/2021/06/09/mimikatz/">从mimikatz抓取密码学习攻防</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">06/08</span>
            <a class="archive-post-title" href="/2021/06/08/LLMNR%E5%92%8CNetBIOS%E6%AC%BA%E9%AA%97%E6%94%BB%E5%87%BB%E5%88%86%E6%9E%90%E5%8F%8A%E9%98%B2%E8%8C%83/">LLMNR和NetBIOS欺骗攻击分析及防范</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">06/04</span>
            <a class="archive-post-title" href="/2021/06/04/nullptr/">NULL、0、nullptr 区别分析</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">06/03</span>
            <a class="archive-post-title" href="/2021/06/03/C++/">C++</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">06/02</span>
            <a class="archive-post-title" href="/2021/06/02/RPC%E6%8F%90%E6%9D%83/">RPC提权</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">06/01</span>
            <a class="archive-post-title" href="/2021/06/01/UAC%E6%8F%90%E6%9D%83/">CVE-2019-1388 UAC提权</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">06/01</span>
            <a class="archive-post-title" href="/2021/06/01/%E7%BC%96%E5%86%99exp/">如何编写属于自己的第一个exp</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">05/29</span>
            <a class="archive-post-title" href="/2021/05/29/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/">读书笔记</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">05/28</span>
            <a class="archive-post-title" href="/2021/05/28/moonsec/">vulnhub靶场实战</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">05/26</span>
            <a class="archive-post-title" href="/2021/05/26/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B8%AD%E5%BC%B9shell%E7%9A%84%E5%A4%9A%E7%A7%8D%E6%96%B9%E5%BC%8F%E5%8F%8Abypass/">渗透测试中弹shell的多种方式及bypass</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">05/25</span>
            <a class="archive-post-title" href="/2021/05/25/CVE-2020-1472%E8%AF%A6%E8%A7%A3/">CVE-2020-1472详解</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">05/23</span>
            <a class="archive-post-title" href="/2021/05/23/%E4%BB%8E%E5%A4%96%E5%9B%B4%E6%89%93%E7%82%B9%E5%88%B0%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F%E6%8B%BF%E4%B8%8B%E5%9F%9F%E6%8E%A7/">从外围打点到内网渗透拿下域控</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">05/19</span>
            <a class="archive-post-title" href="/2021/05/19/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F%E4%B9%8B%E5%90%91%E6%97%A5%E8%91%B5%E5%A6%99%E7%94%A8/">内网渗透之向日葵妙用</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">05/12</span>
            <a class="archive-post-title" href="/2021/05/12/Dedecms%EF%BC%88%E7%BB%87%E6%A2%A6cms%EF%BC%89/">Dedecms(织梦cms)漏洞分析及复现</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">05/12</span>
            <a class="archive-post-title" href="/2021/05/12/EmpireCMS%EF%BC%88%E5%B8%9D%E5%9B%BDcms%EF%BC%89/">Empirecms(帝国cms)漏洞分析及复现</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">05/11</span>
            <a class="archive-post-title" href="/2021/05/11/CVE-2020-0796%E5%88%86%E6%9E%90%E5%8F%8A%E5%88%A9%E7%94%A8/">CVE-2020-0796分析及利用</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">05/11</span>
            <a class="archive-post-title" href="/2021/05/11/MS17_010%E6%A3%80%E6%B5%8B%E5%8F%8A%E6%89%93%E6%B3%95/">MS17_010检测及打法</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">05/11</span>
            <a class="archive-post-title" href="/2021/05/11/%E6%9C%A8%E9%A9%AC%E8%A7%A3%E6%9E%90&disable_fuctions/">木马解析&disable_fuctions</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">05/11</span>
            <a class="archive-post-title" href="/2021/05/11/%E7%AC%AC%E4%B8%80%E6%AC%A1hvv%E6%80%BB%E7%BB%93/">第一次hvv总结</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">05/08</span>
            <a class="archive-post-title" href="/2021/05/08/jboss%E4%B9%8BJMXInvokerServlet%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90%E5%88%A9%E7%94%A8/">jboss之JMXInvokerServlet反序列化漏洞分析利用</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">05/08</span>
            <a class="archive-post-title" href="/2021/05/08/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E7%9A%84n%E7%A7%8D%E5%A7%BF%E5%8A%BF/">内网穿透的n种姿势</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">05/06</span>
            <a class="archive-post-title" href="/2021/05/06/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0bypass%E5%AE%89%E5%85%A8%E7%8B%97/">文件上传bypass安全狗</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">04/28</span>
            <a class="archive-post-title" href="/2021/04/28/cs%E5%8A%A0%E8%BD%BD%E5%AE%8F%E4%B8%8A%E7%BA%BF%E5%88%9D%E6%8E%A2/">cs加载宏上线初探</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">04/27</span>
            <a class="archive-post-title" href="/2021/04/27/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F%E4%B9%8BDPAPI%E6%9C%BA%E5%88%B6%E5%AD%A6%E4%B9%A0/">内网渗透之DPAPI机制学习</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">04/20</span>
            <a class="archive-post-title" href="/2021/04/20/%E9%9A%90%E8%97%8F%E7%94%A8%E6%88%B7%E7%9A%84%E5%88%9B%E5%BB%BA%E5%92%8C%E4%BD%BF%E7%94%A8/">隐藏用户的创建和使用</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">04/19</span>
            <a class="archive-post-title" href="/2021/04/19/%E5%88%A9%E7%94%A8%E5%8D%B7%E5%BD%B1%E6%8B%B7%E8%B4%9D%E6%9C%8D%E5%8A%A1%E6%8F%90%E5%8F%96ntds.dit/">利用卷影拷贝服务提取ntds.dit</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">04/17</span>
            <a class="archive-post-title" href="/2021/04/17/%E4%B8%AD%E9%97%B4%E4%BA%BA%E6%AC%BA%E9%AA%97/">中间人攻击之arp欺骗</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">04/15</span>
            <a class="archive-post-title" href="/2021/04/15/%E6%B5%85%E8%B0%88%E5%9F%9F%E6%B8%97%E9%80%8F%E4%B8%AD%E7%9A%84%E7%BB%84%E7%AD%96%E7%95%A5%E5%8F%8Agpp%E8%BF%90%E7%94%A8/">浅谈域渗透中组策略及gpp运用</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">04/14</span>
            <a class="archive-post-title" href="/2021/04/14/thinkphp%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90%E5%92%8C%E6%80%BB%E7%BB%93/">thinkphp漏洞分析与总结</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">04/13</span>
            <a class="archive-post-title" href="/2021/04/13/msf%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3/">msf使用详解</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">04/13</span>
            <a class="archive-post-title" href="/2021/04/13/sql%E6%B3%A8%E5%85%A5%E4%B9%8B%E8%B6%85%E8%AF%A6%E7%BB%86sqlmap%E4%BD%BF%E7%94%A8%E6%94%BB%E7%95%A5/">sql注入之超详细sqlmap使用攻略</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">04/10</span>
            <a class="archive-post-title" href="/2021/04/10/windows%E8%AE%A4%E8%AF%81%E8%A7%A3%E8%AF%BB/">windows认证解读</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">04/09</span>
            <a class="archive-post-title" href="/2021/04/09/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F%E4%B9%8B%E5%B7%A7%E7%94%A8smb%20beacon%E6%8B%BF%E4%B8%8B%E4%B8%8D%E5%87%BA%E7%BD%91%E4%B8%BB%E6%9C%BA/">巧用smb beacon拿下不出网主机(红日靶场1)</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">04/08</span>
            <a class="archive-post-title" href="/2021/04/08/phpmyadmin%E9%A1%B5%E9%9D%A2getshell/">phpmyadmin页面getshell</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">04/08</span>
            <a class="archive-post-title" href="/2021/04/08/windows%E7%8E%AF%E5%A2%83%E4%B8%8B%E6%8A%93%E5%AF%86%E7%A0%81%E6%80%BB%E7%BB%93/">windows环境下抓密码总结</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">04/06</span>
            <a class="archive-post-title" href="/2021/04/06/Kerberos%E5%8D%8F%E8%AE%AE&%E6%BC%8F%E6%B4%9E/">kerberos协议&漏洞</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">04/04</span>
            <a class="archive-post-title" href="/2021/04/04/Stega/">Stega</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">04/03</span>
            <a class="archive-post-title" href="/2021/04/03/PE/">PE</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">04/02</span>
            <a class="archive-post-title" href="/2021/04/02/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F%E5%91%BD%E4%BB%A4/">内网渗透命令</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">03/30</span>
            <a class="archive-post-title" href="/2021/03/30/IPC%E5%91%BD%E4%BB%A4&%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1%E4%B8%8A%E7%BA%BF/">IPC命令&计划任务上线</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">03/29</span>
            <a class="archive-post-title" href="/2021/03/29/%E5%B8%B8%E7%94%A8%E7%AB%AF%E5%8F%A3%E6%80%BB%E7%BB%93/">常用端口总结</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">03/27</span>
            <a class="archive-post-title" href="/2021/03/27/mysql%E7%A6%BB%E7%BA%BF%E8%A7%A3%E6%9E%90%E5%AF%86%E7%A0%81/">mysql离线解析密码</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">03/27</span>
            <a class="archive-post-title" href="/2021/03/27/%E7%BB%95%E8%BF%87CDN%E6%89%BE%E6%BA%90%E7%AB%99ip/">绕过CDN找源站ip</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">03/27</span>
            <a class="archive-post-title" href="/2021/03/27/%E8%AE%B0%E4%B8%80%E6%AC%A1php%E3%80%81sql%E6%B3%A8%E5%85%A5%E5%AD%A6%E4%B9%A0%E5%90%8E%E7%9A%84%E4%B8%80%E9%81%93ctf%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E9%A2%98%E5%A4%8D%E7%9B%98/">记一次php、sql注入学习后的一道ctf代码审计题复盘</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">03/26</span>
            <a class="archive-post-title" href="/2021/03/26/%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AC%AC%E4%B8%80%E6%AC%A1sql%E5%AE%9E%E6%88%98/">小白的第一次sql实战</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">03/23</span>
            <a class="archive-post-title" href="/2021/03/23/crackme001/">crackme001</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">03/21</span>
            <a class="archive-post-title" href="/2021/03/21/certutil&wmic%E4%B8%8B%E8%BD%BD%E7%BB%95%E8%BF%87/">certutil&wmic绕过</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">03/17</span>
            <a class="archive-post-title" href="/2021/03/17/vps-java%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/">vps-java环境配置</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">03/16</span>
            <a class="archive-post-title" href="/2021/03/16/Joomla/">Joomla框架搭建&远程代码执行(RCE)漏洞复现</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">03/16</span>
            <a class="archive-post-title" href="/2021/03/16/sqlmap%E5%9C%A8https%E4%B8%8B%E6%8A%A5%E9%94%99%20-%20ssl%E8%BF%9E%E6%8E%A5%E5%A4%B1%E8%B4%A5/">sqlmap在https下的一种错误 - ssl连接失败</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">03/16</span>
            <a class="archive-post-title" href="/2021/03/16/jboss%E6%89%93%E5%85%A5%E5%86%85%E7%BD%91%E7%9A%84%E5%9B%9B%E7%A7%8D%E6%96%B9%E5%BC%8F/">jboss打入内网的四种方式</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">03/14</span>
            <a class="archive-post-title" href="/2021/03/14/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80JCC%E6%8C%87%E4%BB%A4%E8%A1%A8/">汇编JCC指令表</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">03/13</span>
            <a class="archive-post-title" href="/2021/03/13/readme/">README</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">03/13</span>
            <a class="archive-post-title" href="/2021/03/13/%E5%86%99%E5%9C%A8%E6%9C%80%E5%89%8D/">写在最前</a>
        </li>
    
    </div>
</div>

        <div class="sidebar-panel-tags">
    <div class="sidebar-tags-name">
        
            <span class="sidebar-tag-name" data-tags="二进制">
                <span class="iconfont-archer">&#xe606;</span>
                二进制
            </span>
        
            <span class="sidebar-tag-name" data-tags="C++">
                <span class="iconfont-archer">&#xe606;</span>
                C++
            </span>
        
            <span class="sidebar-tag-name" data-tags="内网渗透">
                <span class="iconfont-archer">&#xe606;</span>
                内网渗透
            </span>
        
            <span class="sidebar-tag-name" data-tags="cve">
                <span class="iconfont-archer">&#xe606;</span>
                cve
            </span>
        
            <span class="sidebar-tag-name" data-tags="漏洞复现">
                <span class="iconfont-archer">&#xe606;</span>
                漏洞复现
            </span>
        
            <span class="sidebar-tag-name" data-tags="cms">
                <span class="iconfont-archer">&#xe606;</span>
                cms
            </span>
        
            <span class="sidebar-tag-name" data-tags="web渗透">
                <span class="iconfont-archer">&#xe606;</span>
                web渗透
            </span>
        
            <span class="sidebar-tag-name" data-tags="private">
                <span class="iconfont-archer">&#xe606;</span>
                private
            </span>
        
            <span class="sidebar-tag-name" data-tags="kerberos">
                <span class="iconfont-archer">&#xe606;</span>
                kerberos
            </span>
        
            <span class="sidebar-tag-name" data-tags="域渗透">
                <span class="iconfont-archer">&#xe606;</span>
                域渗透
            </span>
        
            <span class="sidebar-tag-name" data-tags="横向移动">
                <span class="iconfont-archer">&#xe606;</span>
                横向移动
            </span>
        
            <span class="sidebar-tag-name" data-tags="提权">
                <span class="iconfont-archer">&#xe606;</span>
                提权
            </span>
        
            <span class="sidebar-tag-name" data-tags="ctf">
                <span class="iconfont-archer">&#xe606;</span>
                ctf
            </span>
        
            <span class="sidebar-tag-name" data-tags="cobalt strike">
                <span class="iconfont-archer">&#xe606;</span>
                cobalt strike
            </span>
        
            <span class="sidebar-tag-name" data-tags="apt">
                <span class="iconfont-archer">&#xe606;</span>
                apt
            </span>
        
            <span class="sidebar-tag-name" data-tags="msf命令">
                <span class="iconfont-archer">&#xe606;</span>
                msf命令
            </span>
        
            <span class="sidebar-tag-name" data-tags="java中间件">
                <span class="iconfont-archer">&#xe606;</span>
                java中间件
            </span>
        
            <span class="sidebar-tag-name" data-tags="mysql">
                <span class="iconfont-archer">&#xe606;</span>
                mysql
            </span>
        
            <span class="sidebar-tag-name" data-tags="中间件">
                <span class="iconfont-archer">&#xe606;</span>
                中间件
            </span>
        
            <span class="sidebar-tag-name" data-tags="sql">
                <span class="iconfont-archer">&#xe606;</span>
                sql
            </span>
        
            <span class="sidebar-tag-name" data-tags="thinkphp">
                <span class="iconfont-archer">&#xe606;</span>
                thinkphp
            </span>
        
            <span class="sidebar-tag-name" data-tags="web">
                <span class="iconfont-archer">&#xe606;</span>
                web
            </span>
        
            <span class="sidebar-tag-name" data-tags="环境配置">
                <span class="iconfont-archer">&#xe606;</span>
                环境配置
            </span>
        
            <span class="sidebar-tag-name" data-tags="oa">
                <span class="iconfont-archer">&#xe606;</span>
                oa
            </span>
        
            <span class="sidebar-tag-name" data-tags="bypass">
                <span class="iconfont-archer">&#xe606;</span>
                bypass
            </span>
        
            <span class="sidebar-tag-name" data-tags="windows api">
                <span class="iconfont-archer">&#xe606;</span>
                windows api
            </span>
        
            <span class="sidebar-tag-name" data-tags="碎碎念">
                <span class="iconfont-archer">&#xe606;</span>
                碎碎念
            </span>
        
            <span class="sidebar-tag-name" data-tags="php">
                <span class="iconfont-archer">&#xe606;</span>
                php
            </span>
        
            <span class="sidebar-tag-name" data-tags="hvv">
                <span class="iconfont-archer">&#xe606;</span>
                hvv
            </span>
        
            <span class="sidebar-tag-name" data-tags="靶场实战">
                <span class="iconfont-archer">&#xe606;</span>
                靶场实战
            </span>
        
            <span class="sidebar-tag-name" data-tags="权限维持">
                <span class="iconfont-archer">&#xe606;</span>
                权限维持
            </span>
        
    </div>
    <div class="iconfont-archer sidebar-tags-empty">&#xe678;</div>
    <div class="tag-load-fail" style="display: none; color: #ccc; font-size: 0.6rem;">
        缺失模块，请参考主题文档进行安装配置：https://github.com/fi3ework/hexo-theme-archer#%E5%AE%89%E8%A3%85%E4%B8%BB%E9%A2%98
    </div> 
    <div class="sidebar-tags-list"></div>
</div>

        <div class="sidebar-panel-categories">
    <div class="sidebar-categories-name">
    
    </div>
    <div class="iconfont-archer sidebar-categories-empty">&#xe678;</div>
    <div class="sidebar-categories-list"></div>
</div>

    </div>
</div>

        <!-- site-meta -->
        <script>
    var siteMeta = {
        root: "/",
        author: "Drunkmars"
    }
</script>

        <!-- import experimental options here -->
        <!-- Custom Font -->


        <!-- main func -->
        <script src="/scripts/main.js?v=20210823"></script>
        <!-- dark mode -->
        <script src="/scripts/dark.js?v=20210823"></script>
        <!-- fancybox -->
        <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" defer></script>
        <!-- algolia -->
        
        <!-- busuanzi -->
        
            <script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>
        
        <!-- CNZZ -->
        
        <!-- async load share.js -->
        
            <script src="/scripts/share.js?v=20210823" async></script>
        
        <!-- mermaid -->
        
    </body>
</html>
